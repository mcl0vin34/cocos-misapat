System.register("chunks:///_virtual/BoostController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketManager.ts"],(function(o){var i,t,n,e,a,r,s,l,c,f,u,h,b;return{setters:[function(o){i=o.applyDecoratedDescriptor,t=o.inheritsLoose,n=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){a=o.cclegacy,r=o._decorator,s=o.Label,l=o.Node,c=o.Color,f=o.tween,u=o.Vec3,h=o.Component},function(o){b=o.SocketManager}],execute:function(){var p,g,d,L,v,w,y,m,C;a._RF.push({},"56fbbewdwxJOIoAGHAh8WY0","BoostController",void 0);var k=r.ccclass,B=r.property;o("BoostController",(p=k("BoostController"),g=B(b),d=B(s),p((w=i((v=function(o){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=o.call.apply(o,[this].concat(a))||this,n(i,"socketManager",w,e(i)),n(i,"notificationLabel",y,e(i)),n(i,"animationDuration",m,e(i)),n(i,"moveUpDistance",C,e(i)),i.initialPosition=new u,i}t(i,o);var a=i.prototype;return a.onLoad=function(){this.node.on(l.EventType.TOUCH_END,this.onBoostClicked,this),this.notificationLabel?(this.notificationLabel.node.active=!1,this.initialPosition=this.notificationLabel.node.position.clone()):console.error("notificationLabel не назначен в BoostController.")},a.onBoostClicked=function(o){if(this.socketManager){var i=this.socketManager.getCurrentEnergy();if(this.socketManager.getCurrentBoosts()<=0)return this.showNotification("Бустеры кончились!"),void console.log("No boosts left.");if(i>=300)return this.showNotification("Слишком много энергии!"),void console.log("Energy is 300 or more, boost not activated.");this.socketManager.activateBoost(),this.showNotification("Энергия восстановлена!")}else console.warn("SocketManager is not assigned in BoostController.")},a.showNotification=function(o){var i=this;this.notificationLabel?(this.notificationLabel.string=o,this.notificationLabel.node.active=!0,this.notificationLabel.color=new c(255,255,255,255),this.notificationLabel.node.setPosition(this.initialPosition.clone()),f(this.notificationLabel).to(this.animationDuration,{color:new c(255,255,255,0)}).start(),f(this.notificationLabel.node).by(this.animationDuration,{position:new u(0,this.moveUpDistance,0)}).call((function(){i.notificationLabel.node.active=!1,i.notificationLabel.color=new c(255,255,255,255),i.notificationLabel.node.setPosition(i.initialPosition.clone())})).start()):console.warn("notificationLabel is not assigned in BoostController.")},i}(h)).prototype,"socketManager",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(v.prototype,"notificationLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(v.prototype,"animationDuration",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),C=i(v.prototype,"moveUpDistance",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),L=v))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/FloatingText.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,r,n,i,a,c,l,s,u,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.Label,l=t.Color,s=t.tween,u=t.Vec3,p=t.Component}],execute:function(){var d,f,h,g;i._RF.push({},"bd2afV6GjdEioGJ6Sb+apw4","FloatingText",void 0);var b=a.ccclass,y=a.property;t("FloatingText",b("FloatingText")((h=o((f=function(t){function o(){for(var o,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return o=t.call.apply(t,[this].concat(i))||this,r(o,"duration",h,n(o)),r(o,"moveUpDistance",g,n(o)),o}return e(o,t),o.prototype.start=function(){var t=this,o=this.getComponent(c)||this.getComponentInChildren(c);o&&(o.color=new l(o.color.r,o.color.g,o.color.b,255),s(o).to(this.duration,{color:new l(o.color.r,o.color.g,o.color.b,0)}).start(),s(this.node).by(this.duration,{position:new u(0,this.moveUpDistance,0)}).call((function(){t.node.destroy()})).start())},o}(p)).prototype,"duration",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),g=o(f.prototype,"moveUpDistance",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),d=f))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/FriendsPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketManager.ts"],(function(e){var r,n,t,i,a,o,s,l,c,u,f,p,d,b;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.ScrollView,u=e.Prefab,f=e.Label,p=e.instantiate,d=e.Component},function(e){b=e.SocketManager}],execute:function(){var g,h,m,F,v,L,w,k,y,P;s._RF.push({},"829ce7RYglPV6kmQF/Wbmbm","FriendsPage",void 0);var I=l.ccclass,x=l.property;e("FriendsPage",(g=I("FriendsPage"),h=x(c),m=x(u),F=x(f),g((w=r((L=function(e){function r(){for(var r,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,t(r,"scrollView",w,i(r)),t(r,"friendItemPrefab",k,i(r)),t(r,"totalFriendsLabel",y,i(r)),t(r,"apiBaseUrl",P,i(r)),r}n(r,e);var s=r.prototype;return s.start=function(){if(!b.instance)return console.error("SocketManager не инициализирован."),void(this.totalFriendsLabel.string="Ошибка инициализации.");this.fetchFriends()},s.fetchFriends=function(){var e=a(o().mark((function e(){var r,n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.instance.getUserId()){e.next=5;break}return console.error("userId не установлен в SocketManager."),this.totalFriendsLabel.string="Неизвестный пользователь.",e.abrupt("return");case 5:return e.prev=5,e.next=8,fetch(this.apiBaseUrl+"/"+r);case 8:if((n=e.sent).ok){e.next=14;break}if(404!==n.status){e.next=13;break}return this.totalFriendsLabel.string="У тебя пока нет друзей",e.abrupt("return");case 13:throw new Error("Network response was not ok");case 14:return e.next=16,n.json();case 16:t=e.sent,console.log("Fetched friends:",t),this.totalFriendsLabel.string="У тебя "+t.length+" друзей",this.populateFriendsList(t),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),console.error("Ошибка при загрузке списка друзей:",e.t0),this.totalFriendsLabel.string="Не удалось загрузить список друзей.";case 26:case"end":return e.stop()}}),e,this,[[5,22]])})));return function(){return e.apply(this,arguments)}}(),s.populateFriendsList=function(e){var r=this,n=this.scrollView.content;console.log("Populating friends list with",e.length,"friends."),n.removeAllChildren(),e.forEach((function(e,t){console.log("Adding friend "+(t+1)+":",e);var i=p(r.friendItemPrefab);i.parent=n;var a=i.getComponentsInChildren(f);console.log("Found "+a.length+" Label components in FriendItem.");var o=null,s=null,l=null;a.forEach((function(e){var r=e.node.name;"UsernameLabel"===r?o=e:"NumberLabel"===r?s=e:"CoinsLabel"===r&&(l=e)})),o&&s&&l?(o.string=e.username,s.string=t+1+".",l.string=r.formatCoins(e.coins),console.log("Set Username: "+e.username+", Number: "+(t+1)+", Coins: "+e.coins)):(console.warn("Не удалось найти один из Label компонентов в FriendItem"),console.log("Найденные Label узлы:",a.map((function(e){return e.node.name}))))}))},s.formatCoins=function(e){return e>=1e6?Math.round(e/1e6)+"M":Math.round(e).toLocaleString("ru-RU")},r}(d)).prototype,"scrollView",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=r(L.prototype,"friendItemPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(L.prototype,"totalFriendsLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(L.prototype,"apiBaseUrl",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://dev.simatap.ru/api/referrals"}}),v=L))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/IncomeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketManager.ts"],(function(e){var t,n,r,a,o,c,i,s,u,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){i=e.cclegacy,s=e._decorator,u=e.Label,l=e.Component},function(e){p=e.SocketManager}],execute:function(){var m,f,h,I,d;i._RF.push({},"a3599luME5HILUcjWVa3vL6","IncomeManager",void 0);var b=s.ccclass,g=s.property;e("IncomeManager",(m=b("IncomeManager"),f=g(u),m((d=t((I=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,r(t,"incomeLabel",d,a(t)),t.apiUrl="https://dev.simatap.ru/api/upgrades",t}n(t,e);var i=t.prototype;return i.start=function(){if(this.incomeLabel)return p.instance?void this.fetchIncomeData():(console.error("SocketManager не инициализирован."),void this.updateIncomeLabel("+ 0 доход в час"));console.error("incomeLabel не назначен в IncomeManager.")},i.fetchIncomeData=function(){var e=o(c().mark((function e(){var t,n,r,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.instance.getUserId()){e.next=5;break}return console.error("userId не установлен в SocketManager."),this.updateIncomeLabel("+ 0 доход в час"),e.abrupt("return");case 5:return e.prev=5,e.next=8,fetch(this.apiUrl+"?userId="+t);case 8:if((n=e.sent).ok){e.next=11;break}throw new Error("HTTP error! status: "+n.status);case 11:return e.next=13,n.json();case 13:r=e.sent,a=this.calculateTotalIncome(r),o=this.formatIncome(a),this.updateIncomeLabel(o),console.log("Общий доход: "+o),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(5),console.error("Ошибка при получении данных с API:",e.t0),this.updateIncomeLabel("+ 0 доход в час");case 24:case"end":return e.stop()}}),e,this,[[5,20]])})));return function(){return e.apply(this,arguments)}}(),i.calculateTotalIncome=function(e){return e.reduce((function(e,t){return e+(t.cumulative_income||0)}),0)},i.formatIncome=function(e){return e>=1e3?"+ "+(e/1e3).toFixed(0)+"K доход в час":"+ "+e+" доход в час"},i.updateIncomeLabel=function(e){this.incomeLabel.string=e},t}(l)).prototype,"incomeLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=I))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/index.js",["./cjs-loader.mjs"],(function(e,a){var t;return{setters:[function(e){t=e.default}],execute:function(){e("default",void 0);var i=e("__cjsMetaURL",a.meta.url);t.define(i,(function(a,t,i,o,s){var r,n;System.register("chunks:///_virtual/builtin-pipeline-settings.ts",["./rollupPluginModLoBabelHelpers.js","cc","./builtin-pipeline-types.ts"],(function(e){var a,t,i,o,s,r,n,l,d,c,h,p,g,u,f,m,_;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.createClass,o=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy,n=e._decorator,l=e.Camera,d=e.CCBoolean,c=e.CCInteger,h=e.CCFloat,p=e.Material,g=e.Texture2D,u=e.rendering,f=e.Component},function(e){m=e.fillRequiredPipelineSettings,_=e.makePipelineSettings}],execute:function(){var b,S,P,R,M,y,w,T,C,E,v,x,D,A,F,O,L,k,B,G,N,z,Q,I,H,U,V,W,j,X,q,Y,K,Z;r._RF.push({},"de1c2EHcMhAIYRZY5nyTQHG","builtin-pipeline-settings",void 0);var J=n.ccclass,$=n.disallowMultiple,ee=n.executeInEditMode,ae=n.menu,te=n.property,ie=n.requireComponent,oe=n.type;e("BuiltinPipelineSettings",(b=J("BuiltinPipelineSettings"),S=ae("Rendering/BuiltinPipelineSettings"),P=ie(l),R=te(d),M=te({displayName:"Editor Preview (Experimental)",type:d}),y=te({group:{id:"MSAA",name:"Multisample Anti-Aliasing"},type:d}),w=te({group:{id:"MSAA",name:"Multisample Anti-Aliasing",style:"section"},type:c,range:[2,4,2]}),T=te({group:{id:"ShadingScale",name:"ShadingScale",style:"section"},type:d}),C=te({tooltip:"i18n:postprocess.shadingScale",group:{id:"ShadingScale",name:"ShadingScale"},type:h,range:[.01,4,.01],slide:!0}),E=te({group:{id:"DepthOfField",name:"DepthOfField (PostProcessing)",style:"section"},type:d,visible:!1}),v=te({group:{id:"DepthOfField",name:"DepthOfField (PostProcessing)",style:"section"},type:p,visible:!1}),x=te({group:{id:"DepthOfField",name:"DepthOfField (PostProcessing)",style:"section"},type:h,min:0,visible:!1}),D=te({group:{id:"DepthOfField",name:"DepthOfField (PostProcessing)",style:"section"},type:h,min:0,visible:!1}),A=oe(h),F=te({group:{id:"DepthOfField",name:"DepthOfField (PostProcessing)",style:"section"},type:h,range:[1,10,.01],slide:!0,visible:!1}),O=te({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:d}),L=te({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:p}),k=te({tooltip:"i18n:bloom.enableAlphaMask",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:d}),B=te({tooltip:"i18n:bloom.iterations",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:c,range:[1,6,1],slide:!0}),G=te({tooltip:"i18n:bloom.threshold",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:h,min:0}),N=te({group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:d}),z=te({group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:p}),Q=te({tooltip:"i18n:color_grading.contribute",group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:h,range:[0,1,.01],slide:!0}),I=te({tooltip:"i18n:color_grading.originalMap",group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:g}),H=te({group:{id:"FXAA",name:"Fast Approximate Anti-Aliasing (PostProcessing)",style:"section"},type:d}),U=te({group:{id:"FXAA",name:"Fast Approximate Anti-Aliasing (PostProcessing)",style:"section"},type:p}),V=te({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:d}),W=te({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:p}),j=te({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:h,range:[0,1,.01],slide:!0}),X=te({group:{id:"ToneMapping",name:"ToneMapping",style:"section"},type:p}),b(q=S(q=P(q=$(q=ee((K=a((Y=function(e){function a(){for(var a,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return a=e.call.apply(e,[this].concat(i))||this,o(a,"_settings",K,s(a)),o(a,"_editorPreview",Z,s(a)),a}t(a,e);var r=a.prototype;return r.onEnable=function(){m(this._settings),this.getComponent(l).camera.pipelineSettings=this._settings},r.onDisable=function(){this.getComponent(l).camera.pipelineSettings=null},r._tryEnableEditorPreview=function(){void 0!==u&&(this._editorPreview?u.setEditorPipelineSettings(this._settings):this._disableEditorPreview())},r._disableEditorPreview=function(){void 0!==u&&u.getEditorPipelineSettings()===this._settings&&u.setEditorPipelineSettings(null)},i(a,[{key:"editorPreview",get:function(){return this._editorPreview},set:function(e){this._editorPreview=e}},{key:"MsaaEnable",get:function(){return this._settings.msaa.enabled},set:function(e){this._settings.msaa.enabled=e}},{key:"msaaSampleCount",get:function(){return this._settings.msaa.sampleCount},set:function(e){e=Math.pow(2,Math.ceil(Math.log2(Math.max(e,2)))),e=Math.min(e,4),this._settings.msaa.sampleCount=e}},{key:"shadingScaleEnable",get:function(){return this._settings.enableShadingScale},set:function(e){this._settings.enableShadingScale=e}},{key:"shadingScale",get:function(){return this._settings.shadingScale},set:function(e){this._settings.shadingScale=e}},{key:"dofEnable",get:function(){return this._settings.depthOfField.enabled},set:function(e){this._settings.depthOfField.enabled=e}},{key:"dofMaterial",get:function(){return this._settings.depthOfField.material},set:function(e){this._settings.depthOfField.material!==e&&(this._settings.depthOfField.material=e)}},{key:"dofFocusDistance",get:function(){return this._settings.depthOfField.focusDistance},set:function(e){this._settings.depthOfField.focusDistance=e}},{key:"dofFocusRange",get:function(){return this._settings.depthOfField.focusRange},set:function(e){this._settings.depthOfField.focusRange=e}},{key:"dofBokehRadius",get:function(){return this._settings.depthOfField.bokehRadius},set:function(e){this._settings.depthOfField.bokehRadius=e}},{key:"bloomEnable",get:function(){return this._settings.bloom.enabled},set:function(e){this._settings.bloom.enabled=e}},{key:"bloomMaterial",get:function(){return this._settings.bloom.material},set:function(e){this._settings.bloom.material!==e&&(this._settings.bloom.material=e)}},{key:"bloomEnableAlphaMask",get:function(){return this._settings.bloom.enableAlphaMask},set:function(e){this._settings.bloom.enableAlphaMask=e}},{key:"bloomIterations",get:function(){return this._settings.bloom.iterations},set:function(e){this._settings.bloom.iterations=e}},{key:"bloomThreshold",get:function(){return this._settings.bloom.threshold},set:function(e){this._settings.bloom.threshold=e}},{key:"bloomIntensity",get:function(){return this._settings.bloom.intensity},set:function(e){this._settings.bloom.intensity=e}},{key:"colorGradingEnable",get:function(){return this._settings.colorGrading.enabled},set:function(e){this._settings.colorGrading.enabled=e}},{key:"colorGradingMaterial",get:function(){return this._settings.colorGrading.material},set:function(e){this._settings.colorGrading.material!==e&&(this._settings.colorGrading.material=e)}},{key:"colorGradingContribute",get:function(){return this._settings.colorGrading.contribute},set:function(e){this._settings.colorGrading.contribute=e}},{key:"colorGradingMap",get:function(){return this._settings.colorGrading.colorGradingMap},set:function(e){this._settings.colorGrading.colorGradingMap=e}},{key:"fxaaEnable",get:function(){return this._settings.fxaa.enabled},set:function(e){this._settings.fxaa.enabled=e}},{key:"fxaaMaterial",get:function(){return this._settings.fxaa.material},set:function(e){this._settings.fxaa.material!==e&&(this._settings.fxaa.material=e)}},{key:"fsrEnable",get:function(){return this._settings.fsr.enabled},set:function(e){this._settings.fsr.enabled=e}},{key:"fsrMaterial",get:function(){return this._settings.fsr.material},set:function(e){this._settings.fsr.material!==e&&(this._settings.fsr.material=e)}},{key:"fsrSharpness",get:function(){return this._settings.fsr.sharpness},set:function(e){this._settings.fsr.sharpness=e}},{key:"toneMappingMaterial",get:function(){return this._settings.toneMapping.material},set:function(e){this._settings.toneMapping.material!==e&&(this._settings.toneMapping.material=e)}}]),a}(f)).prototype,"_settings",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _()}}),Z=a(Y.prototype,"_editorPreview",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a(Y.prototype,"editorPreview",[M],Object.getOwnPropertyDescriptor(Y.prototype,"editorPreview"),Y.prototype),a(Y.prototype,"MsaaEnable",[y],Object.getOwnPropertyDescriptor(Y.prototype,"MsaaEnable"),Y.prototype),a(Y.prototype,"msaaSampleCount",[w],Object.getOwnPropertyDescriptor(Y.prototype,"msaaSampleCount"),Y.prototype),a(Y.prototype,"shadingScaleEnable",[T],Object.getOwnPropertyDescriptor(Y.prototype,"shadingScaleEnable"),Y.prototype),a(Y.prototype,"shadingScale",[C],Object.getOwnPropertyDescriptor(Y.prototype,"shadingScale"),Y.prototype),a(Y.prototype,"dofEnable",[E],Object.getOwnPropertyDescriptor(Y.prototype,"dofEnable"),Y.prototype),a(Y.prototype,"dofMaterial",[v],Object.getOwnPropertyDescriptor(Y.prototype,"dofMaterial"),Y.prototype),a(Y.prototype,"dofFocusDistance",[x],Object.getOwnPropertyDescriptor(Y.prototype,"dofFocusDistance"),Y.prototype),a(Y.prototype,"dofFocusRange",[D],Object.getOwnPropertyDescriptor(Y.prototype,"dofFocusRange"),Y.prototype),a(Y.prototype,"dofBokehRadius",[A,F],Object.getOwnPropertyDescriptor(Y.prototype,"dofBokehRadius"),Y.prototype),a(Y.prototype,"bloomEnable",[O],Object.getOwnPropertyDescriptor(Y.prototype,"bloomEnable"),Y.prototype),a(Y.prototype,"bloomMaterial",[L],Object.getOwnPropertyDescriptor(Y.prototype,"bloomMaterial"),Y.prototype),a(Y.prototype,"bloomEnableAlphaMask",[k],Object.getOwnPropertyDescriptor(Y.prototype,"bloomEnableAlphaMask"),Y.prototype),a(Y.prototype,"bloomIterations",[B],Object.getOwnPropertyDescriptor(Y.prototype,"bloomIterations"),Y.prototype),a(Y.prototype,"bloomThreshold",[G],Object.getOwnPropertyDescriptor(Y.prototype,"bloomThreshold"),Y.prototype),a(Y.prototype,"colorGradingEnable",[N],Object.getOwnPropertyDescriptor(Y.prototype,"colorGradingEnable"),Y.prototype),a(Y.prototype,"colorGradingMaterial",[z],Object.getOwnPropertyDescriptor(Y.prototype,"colorGradingMaterial"),Y.prototype),a(Y.prototype,"colorGradingContribute",[Q],Object.getOwnPropertyDescriptor(Y.prototype,"colorGradingContribute"),Y.prototype),a(Y.prototype,"colorGradingMap",[I],Object.getOwnPropertyDescriptor(Y.prototype,"colorGradingMap"),Y.prototype),a(Y.prototype,"fxaaEnable",[H],Object.getOwnPropertyDescriptor(Y.prototype,"fxaaEnable"),Y.prototype),a(Y.prototype,"fxaaMaterial",[U],Object.getOwnPropertyDescriptor(Y.prototype,"fxaaMaterial"),Y.prototype),a(Y.prototype,"fsrEnable",[V],Object.getOwnPropertyDescriptor(Y.prototype,"fsrEnable"),Y.prototype),a(Y.prototype,"fsrMaterial",[W],Object.getOwnPropertyDescriptor(Y.prototype,"fsrMaterial"),Y.prototype),a(Y.prototype,"fsrSharpness",[j],Object.getOwnPropertyDescriptor(Y.prototype,"fsrSharpness"),Y.prototype),a(Y.prototype,"toneMappingMaterial",[X],Object.getOwnPropertyDescriptor(Y.prototype,"toneMappingMaterial"),Y.prototype),q=Y))||q)||q)||q)||q)||q)),r._RF.pop()}}})),System.register("chunks:///_virtual/builtin-pipeline-types.ts",["cc"],(function(e){var a,t;return{setters:[function(e){a=e.cclegacy,t=e.gfx}],execute:function(){e({fillRequiredBloom:n,fillRequiredColorGrading:l,fillRequiredDepthOfField:r,fillRequiredFSR:d,fillRequiredFXAA:c,fillRequiredHBAO:function(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.radiusScale&&(e.radiusScale=1),void 0===e.angleBiasDegree&&(e.angleBiasDegree=10),void 0===e.blurSharpness&&(e.blurSharpness=3),void 0===e.aoSaturation&&(e.aoSaturation=1),void 0===e.needBlur&&(e.needBlur=!1)},fillRequiredMSAA:s,fillRequiredPipelineSettings:function(e){e.msaa?s(e.msaa):e.msaa=o(),void 0===e.enableShadingScale&&(e.enableShadingScale=!1),void 0===e.shadingScale&&(e.shadingScale=.5),e.depthOfField?r(e.depthOfField):e.depthOfField={enabled:!1,material:null,focusDistance:0,focusRange:0,bokehRadius:1},e.bloom?n(e.bloom):e.bloom={enabled:!1,material:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:2.3},e.toneMapping?h(e.toneMapping):e.toneMapping={material:null},e.colorGrading?l(e.colorGrading):e.colorGrading={enabled:!1,material:null,contribute:1,colorGradingMap:null},e.fsr?d(e.fsr):e.fsr={enabled:!1,material:null,sharpness:.8},e.fxaa?c(e.fxaa):e.fxaa={enabled:!1,material:null}},fillRequiredToneMapping:h,makeBloom:function(){return{enabled:!1,material:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:2.3}},makeColorGrading:function(){return{enabled:!1,material:null,contribute:1,colorGradingMap:null}},makeDepthOfField:function(){return{enabled:!1,material:null,focusDistance:0,focusRange:0,bokehRadius:1}},makeFSR:function(){return{enabled:!1,material:null,sharpness:.8}},makeFXAA:function(){return{enabled:!1,material:null}},makeHBAO:function(){return{enabled:!1,radiusScale:1,angleBiasDegree:10,blurSharpness:3,aoSaturation:1,needBlur:!1}},makeMSAA:o,makePipelineSettings:function(){return{msaa:o(),enableShadingScale:!1,shadingScale:.5,depthOfField:{enabled:!1,material:null,focusDistance:0,focusRange:0,bokehRadius:1},bloom:{enabled:!1,material:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:2.3},toneMapping:{material:null},colorGrading:{enabled:!1,material:null,contribute:1,colorGradingMap:null},fsr:{enabled:!1,material:null,sharpness:.8},fxaa:{enabled:!1,material:null}}},makeToneMapping:function(){return{material:null}}}),a._RF.push({},"cbf30kCUX9A3K+QpVC6wnzx","builtin-pipeline-types",void 0);var i=t.SampleCount;function o(){return{enabled:!1,sampleCount:i.X4}}function s(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.sampleCount&&(e.sampleCount=i.X4)}function r(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.focusDistance&&(e.focusDistance=0),void 0===e.focusRange&&(e.focusRange=0),void 0===e.bokehRadius&&(e.bokehRadius=1)}function n(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.enableAlphaMask&&(e.enableAlphaMask=!1),void 0===e.iterations&&(e.iterations=3),void 0===e.threshold&&(e.threshold=.8),void 0===e.intensity&&(e.intensity=2.3)}function l(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.contribute&&(e.contribute=1),void 0===e.colorGradingMap&&(e.colorGradingMap=null)}function d(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.sharpness&&(e.sharpness=.8)}function c(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null)}function h(e){void 0===e.material&&(e.material=null)}a._RF.pop()}}})),System.register("chunks:///_virtual/builtin-pipeline.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./builtin-pipeline-types.ts"],(function(){var e,a,t,i,o,s,r,n,l,d,c,h,p,g,u,f,m,_;return{setters:[function(a){e=a.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,t=e.geometry,i=e.gfx,o=e.renderer,s=e.rendering,r=e.Vec3,n=e.Vec4,l=e.Vec2,d=e.Material,c=e.PipelineEventType,h=e.assert,p=e.clamp,g=e.sys,u=e.pipeline,f=e.Layers},function(e){m=e.DEBUG},function(e){_=e.makePipelineSettings}],execute:function(){a._RF.push({},"ff9b0GZzgRM/obMbHGfCNbk","builtin-pipeline",void 0);var b=t.AABB,S=t.Sphere,P=t.intersect,R=i.ClearFlagBit,M=i.Color,y=i.Format,w=i.FormatFeatureBit,T=i.LoadOp,C=i.StoreOp,E=i.TextureType,v=i.Viewport,x=o.scene,D=x.CameraUsage,A=x.CSMLevel,F=x.LightType;function O(e){return!!(e.clearFlag&(R.COLOR|R.STENCIL<<1))}function L(e,a,t,i,o,s){e.shadowFixedArea||e.csmLevel===A.LEVEL_1?(o.left=0,o.top=0,o.width=Math.trunc(a),o.height=Math.trunc(t)):(o.left=Math.trunc(i%2*.5*a),o.top=s>0?Math.trunc(.5*(1-Math.floor(i/2))*t):Math.trunc(.5*Math.floor(i/2)*t),o.width=Math.trunc(.5*a),o.height=Math.trunc(.5*t)),o.left=Math.max(0,o.left),o.top=Math.max(0,o.top),o.width=Math.max(1,o.width),o.height=Math.max(1,o.height)}var k=function(){this.isWeb=!1,this.isWebGL1=!1,this.isWebGPU=!1,this.isMobile=!1,this.isHDR=!1,this.useFloatOutput=!1,this.toneMappingType=0,this.shadowEnabled=!1,this.shadowMapFormat=y.R32F,this.shadowMapSize=new l(1,1),this.usePlanarShadow=!1,this.screenSpaceSignY=1,this.supportDepthSample=!1,this.mobileMaxSpotLightShadowMaps=1,this.platform=new n(0,0,0,0)};function B(e,a){var t=w.SAMPLED_TEXTURE|w.LINEAR_FILTER,s=e.device;a.isWeb=!g.isNative,a.isWebGL1=s.gfxAPI===i.API.WEBGL,a.isWebGPU=s.gfxAPI===i.API.WEBGPU,a.isMobile=g.isMobile,a.isHDR=e.pipelineSceneData.isHDR,a.useFloatOutput=e.getMacroBool("CC_USE_FLOAT_OUTPUT"),a.toneMappingType=e.pipelineSceneData.postSettings.toneMappingType;var r=e.pipelineSceneData.shadows;a.shadowEnabled=r.enabled,a.shadowMapFormat=u.supportsR32FloatTexture(e.device)?y.R32F:y.RGBA8,a.shadowMapSize.set(r.size),a.usePlanarShadow=r.enabled&&r.type===o.scene.ShadowType.Planar,a.screenSpaceSignY=e.device.capabilities.screenSpaceSignY,a.supportDepthSample=(e.device.getFormatFeatures(y.DEPTH_STENCIL)&t)===t;var n=s.capabilities.screenSpaceSignY;a.platform.x=a.isMobile?1:0,a.platform.w=.5*n+.5<<1|.5*s.capabilities.clipSpaceSignY+.5}var G=_(),N=function(){this.colorName="",this.depthStencilName="",this.enableMainLightShadowMap=!1,this.enableMainLightPlanarShadowMap=!1,this.enablePostProcess=!1,this.enableProfiler=!1,this.enableShadingScale=!1,this.enableMSAA=!1,this.enableDOF=!1,this.enableBloom=!1,this.enableColorGrading=!1,this.enableFXAA=!1,this.enableFSR=!1,this.enableHDR=!1,this.enablePlanarReflectionProbe=!1,this.useFullPipeline=!1,this.singleForwardRadiancePass=!1,this.radianceFormat=i.Format.RGBA8,this.shadingScale=.5,this.settings=G};function z(e,a,t){t.enableDOF=e.supportDepthSample&&a.depthOfField.enabled&&!!a.depthOfField.material,t.enableBloom=a.bloom.enabled&&!!a.bloom.material,t.enableColorGrading=a.colorGrading.enabled&&!!a.colorGrading.material&&!!a.colorGrading.colorGradingMap,t.enableFXAA=a.fxaa.enabled&&!!a.fxaa.material,t.enablePostProcess=t.enableDOF||t.enableBloom||t.enableColorGrading||t.enableFXAA}function Q(e,a,t){var o=e.window,r=e.cameraUsage===D.GAME&&!!o.swapchain,n=e.cameraUsage===D.SCENE_VIEW||e.cameraUsage===D.PREVIEW;if(t.colorName=o.colorName,t.depthStencilName=o.depthStencilName,t.useFullPipeline=0!=(e.visibility&f.Enum.DEFAULT),t.enableMainLightShadowMap=a.shadowEnabled&&!a.usePlanarShadow&&!!e.scene&&!!e.scene.mainLight&&e.scene.mainLight.shadowEnabled,t.enableMainLightPlanarShadowMap=a.shadowEnabled&&a.usePlanarShadow&&!!e.scene&&!!e.scene.mainLight&&e.scene.mainLight.shadowEnabled,t.enablePlanarReflectionProbe=r||e.cameraUsage===D.SCENE_VIEW,t.enableProfiler=m,t.settings=e.pipelineSettings?e.pipelineSettings:G,z(a,t.settings,t),n){var l=s.getEditorPipelineSettings();l&&(t.settings=l,z(a,t.settings,t))}t.enableMSAA=t.settings.msaa.enabled&&!a.isWeb&&!a.isWebGL1,t.shadingScale=t.settings.shadingScale,t.enableShadingScale=t.settings.enableShadingScale&&1!==t.shadingScale,t.enableFSR=t.settings.fsr.enabled&&!!t.settings.fsr.material&&t.enableShadingScale&&t.shadingScale<1,t.singleForwardRadiancePass=a.isMobile||t.enableMSAA,t.enableHDR=t.useFullPipeline&&a.useFloatOutput,t.radianceFormat=t.enableHDR?i.Format.RGBA16F:i.Format.RGBA8}if(s){var I=s.QueueHint,H=s.SceneFlags,U=s.ResourceFlags,V=s.ResourceResidency,W=function(){function a(){this.lights=[],this.shadowEnabledSpotLights=[],this._sphere=S.create(0,0,0,1),this._boundingBox=new b,this._rangedDirLightBoundingBox=new b(0,0,0,.5,.5,.5)}var t=a.prototype;return t.cullLights=function(a,t,i){this.lights.length=0,this.shadowEnabledSpotLights.length=0;for(var o,s=e(a.spotLights);!(o=s()).done;){var n=o.value;n.baked||(S.set(this._sphere,n.position.x,n.position.y,n.position.z,n.range),P.sphereFrustum(this._sphere,t)&&(n.shadowEnabled?this.shadowEnabledSpotLights.push(n):this.lights.push(n)))}for(var l,d=e(a.sphereLights);!(l=d()).done;){var c=l.value;c.baked||(S.set(this._sphere,c.position.x,c.position.y,c.position.z,c.range),P.sphereFrustum(this._sphere,t)&&this.lights.push(c))}for(var h,p=e(a.pointLights);!(h=p()).done;){var g=h.value;g.baked||(S.set(this._sphere,g.position.x,g.position.y,g.position.z,g.range),P.sphereFrustum(this._sphere,t)&&this.lights.push(g))}for(var u,f=e(a.rangedDirLights);!(u=f()).done;){var m=u.value;b.transform(this._boundingBox,this._rangedDirLightBoundingBox,m.node.getWorldMatrix()),P.aabbFrustum(this._boundingBox,t)&&this.lights.push(m)}i&&this.shadowEnabledSpotLights.sort((function(e,a){return r.squaredDistance(i,e.position)-r.squaredDistance(i,a.position)}))},t._addLightQueues=function(a,t){for(var i,o=e(this.lights);!(i=o()).done;){var s=i.value,r=t.addQueue(I.BLEND,"forward-add");switch(s.type){case F.SPHERE:r.name="sphere-light";break;case F.SPOT:r.name="spot-light";break;case F.POINT:r.name="point-light";break;case F.RANGED_DIRECTIONAL:r.name="ranged-directional-light";break;default:r.name="unknown-light"}r.addScene(a,H.BLEND,s)}},t.addSpotlightShadowPasses=function(a,t,i){for(var o,s=0,r=e(this.shadowEnabledSpotLights);!(o=r()).done;){var n=o.value,l=a.pipelineSceneData.shadows.size,d=a.addRenderPass(l.x,l.y,"default");if(d.name="SpotLightShadowPass"+s,d.addRenderTarget("SpotShadowMap"+s,T.CLEAR,C.STORE,new M(1,1,1,1)),d.addDepthStencil("SpotShadowDepth"+s,T.CLEAR,C.DISCARD),d.addQueue(I.NONE,"shadow-caster").addScene(t,H.OPAQUE|H.MASK|H.SHADOW_CASTER).useLightFrustum(n),++s>=i)break}},t.addLightQueues=function(a,t,i){this._addLightQueues(t,a);for(var o,s=0,r=e(this.shadowEnabledSpotLights);!(o=r()).done;){var n=o.value;if(a.addTexture("SpotShadowMap"+s,"cc_spotShadowMap"),a.addQueue(I.BLEND,"forward-add").addScene(t,H.BLEND,n),++s>=i)break}},t.addLightPasses=function(a,t,i,o,s,r,n,l,d,c){this._addLightQueues(n,c);for(var h,p=0,g=d.pipelineSceneData.shadows.size,u=e(this.shadowEnabledSpotLights);!(h=u()).done;){var f=h.value,m=d.addRenderPass(g.x,g.y,"default");m.name="SpotlightShadowPass",m.addRenderTarget("ShadowMap"+o,T.CLEAR,C.STORE,new M(1,1,1,1)),m.addDepthStencil("ShadowDepth"+o,T.CLEAR,C.DISCARD),m.addQueue(I.NONE,"shadow-caster").addScene(n,H.OPAQUE|H.MASK|H.SHADOW_CASTER).useLightFrustum(f);var _=++p===this.shadowEnabledSpotLights.length?i:C.STORE;(c=d.addRenderPass(s,r,"default")).name="SpotlightWithShadowMap",c.setViewport(l),c.addRenderTarget(a,T.LOAD),c.addDepthStencil(t,T.LOAD,_),c.addTexture("ShadowMap"+o,"cc_spotShadowMap"),c.addQueue(I.BLEND,"forward-add").addScene(n,H.BLEND,f)}return c},t.isMultipleLightPassesNeeded=function(){return this.shadowEnabledSpotLights.length>0},a}(),j=function(){function t(){this._pipelineEvent=a.director.root.pipelineEvent,this._clearColor=new M(0,0,0,1),this._clearColorTransparentBlack=new M(0,0,0,0),this._reflectionProbeClearColor=new r(0,0,0),this._viewport=new v,this._configs=new k,this._cameraConfigs=new N,this._cocParams=new n(0,0,0,0),this._cocTexSize=new n(0,0,0,0),this._bloomParams=new n(0,0,0,0),this._bloomTexSize=new n(0,0,0,0),this._bloomWidths=[],this._bloomHeights=[],this._bloomTexNames=[],this._colorGradingTexSize=new l(0,0),this._fxaaParams=new n(0,0,0,0),this._fsrParams=new n(0,0,0,0),this._fsrTexSize=new n(0,0,0,0),this._copyAndTonemapMaterial=new d,this._initialized=!1,this.forwardLighting=new W}var g=t.prototype;return g.windowResize=function(e,a,t,i,o){B(e,this._configs),Q(t,this._configs,this._cameraConfigs);var s=this._cameraConfigs.settings,r=a.renderWindowId,n=this._cameraConfigs.enableShadingScale?Math.max(Math.floor(i*this._cameraConfigs.shadingScale),1):i,l=this._cameraConfigs.enableShadingScale?Math.max(Math.floor(o*this._cameraConfigs.shadingScale),1):o;if(e.addRenderWindow(this._cameraConfigs.colorName,y.RGBA8,i,o,a,this._cameraConfigs.depthStencilName),this._cameraConfigs.enableShadingScale?(e.addDepthStencil("ScaledSceneDepth"+r,y.DEPTH_STENCIL,n,l),e.addRenderTarget("ScaledRadiance"+r,this._cameraConfigs.radianceFormat,n,l),e.addRenderTarget("ScaledLdrColor"+r,y.RGBA8,n,l)):(e.addDepthStencil("SceneDepth"+r,y.DEPTH_STENCIL,n,l),e.addRenderTarget("Radiance"+r,this._cameraConfigs.radianceFormat,n,l),e.addRenderTarget("LdrColor"+r,y.RGBA8,n,l)),this._cameraConfigs.enableFSR&&e.addRenderTarget("FsrColor"+r,y.RGBA8,i,o),this._cameraConfigs.enableMSAA&&(this._cameraConfigs.enableHDR?e.addTexture("MsaaRadiance"+r,E.TEX2D,this._cameraConfigs.radianceFormat,n,l,1,1,1,s.msaa.sampleCount,U.COLOR_ATTACHMENT,V.MEMORYLESS):e.addTexture("MsaaRadiance"+r,E.TEX2D,y.RGBA8,n,l,1,1,1,s.msaa.sampleCount,U.COLOR_ATTACHMENT,V.MEMORYLESS),e.addTexture("MsaaDepthStencil"+r,E.TEX2D,y.DEPTH_STENCIL,n,l,1,1,1,s.msaa.sampleCount,U.DEPTH_STENCIL_ATTACHMENT,V.MEMORYLESS)),e.addRenderTarget("ShadowMap"+r,this._configs.shadowMapFormat,this._configs.shadowMapSize.x,this._configs.shadowMapSize.y),e.addDepthStencil("ShadowDepth"+r,y.DEPTH_STENCIL,this._configs.shadowMapSize.x,this._configs.shadowMapSize.y),this._cameraConfigs.singleForwardRadiancePass)for(var d=this._configs.mobileMaxSpotLightShadowMaps,c=0;c!==d;++c)e.addRenderTarget("SpotShadowMap"+c,this._configs.shadowMapFormat,this._configs.shadowMapSize.x,this._configs.shadowMapSize.y),e.addDepthStencil("SpotShadowDepth"+c,y.DEPTH_STENCIL,this._configs.shadowMapSize.x,this._configs.shadowMapSize.y);if(this._cameraConfigs.enableDOF){var h=Math.max(Math.floor(n/2),1),p=Math.max(Math.floor(l/2),1);e.addRenderTarget("DofRadiance"+r,this._cameraConfigs.radianceFormat,n,l),e.addRenderTarget("DofPrefilter"+r,this._cameraConfigs.radianceFormat,h,p),e.addRenderTarget("DofBokeh"+r,this._cameraConfigs.radianceFormat,h,p),e.addRenderTarget("DofFilter"+r,this._cameraConfigs.radianceFormat,h,p)}if(this._cameraConfigs.enableBloom)for(var g=n,u=l,f=0;f!==s.bloom.iterations+1;++f)g=Math.max(Math.floor(g/2),1),u=Math.max(Math.floor(u/2),1),e.addRenderTarget("BloomTex"+r+"_"+f,this._cameraConfigs.radianceFormat,g,u);this._cameraConfigs.enableColorGrading&&s.colorGrading.material&&s.colorGrading.colorGradingMap&&s.colorGrading.material.setProperty("colorGradingMap",s.colorGrading.colorGradingMap),this._cameraConfigs.enableFXAA&&this._cameraConfigs.enableShadingScale&&e.addRenderTarget("AaColor"+r,y.RGBA8,n,l)},g.setup=function(a,t){if(!this._initMaterials(t))for(var i,o=e(a);!(i=o()).done;){var s=i.value;s.scene&&s.window&&(Q(s,this._configs,this._cameraConfigs),this._pipelineEvent.emit(c.RENDER_CAMERA_BEGIN,s),this._cameraConfigs.useFullPipeline?this._buildForwardPipeline(t,s,s.scene):this._buildSimplePipeline(t,s),this._pipelineEvent.emit(c.RENDER_CAMERA_END,s))}},g._buildSimplePipeline=function(e,a){var t=Math.max(Math.floor(a.window.width),1),i=Math.max(Math.floor(a.window.height),1),o=this._cameraConfigs.colorName,s=this._cameraConfigs.depthStencilName,r=a.viewport;this._viewport.left=Math.round(r.x*t),this._viewport.top=Math.round(r.y*i),this._viewport.width=Math.max(Math.round(r.width*t),1),this._viewport.height=Math.max(Math.round(r.height*i),1);var n=a.clearColor;this._clearColor.x=n.x,this._clearColor.y=n.y,this._clearColor.z=n.z,this._clearColor.w=n.w;var l=e.addRenderPass(t,i,"default");O(a)?l.addRenderTarget(o,T.CLEAR,C.STORE,this._clearColor):l.addRenderTarget(o,T.LOAD,C.STORE),a.clearFlag&R.DEPTH_STENCIL?l.addDepthStencil(s,T.CLEAR,C.DISCARD,a.clearDepth,a.clearStencil,a.clearFlag&R.DEPTH_STENCIL):l.addDepthStencil(s,T.LOAD,C.DISCARD),l.setViewport(this._viewport),l.addQueue(I.OPAQUE).addScene(a,H.OPAQUE);var d=H.BLEND|H.UI;this._cameraConfigs.enableProfiler&&(d|=H.PROFILER,l.showStatistics=!0),l.addQueue(I.BLEND).addScene(a,d)},g._buildForwardPipeline=function(e,a,t){var i,o=this._cameraConfigs.settings,s=Math.max(Math.floor(a.window.width),1),r=Math.max(Math.floor(a.window.height),1),n=this._cameraConfigs.enableShadingScale?Math.max(Math.floor(s*this._cameraConfigs.shadingScale),1):s,l=this._cameraConfigs.enableShadingScale?Math.max(Math.floor(r*this._cameraConfigs.shadingScale),1):r,d=a.window.renderWindowId,c=this._cameraConfigs.colorName,p=this._cameraConfigs.enableShadingScale?"ScaledSceneDepth"+d:"SceneDepth"+d,g=this._cameraConfigs.enableShadingScale?"ScaledRadiance"+d:"Radiance"+d,u=this._cameraConfigs.enableShadingScale?"ScaledLdrColor"+d:"LdrColor"+d,f=t.mainLight;if(this.forwardLighting.cullLights(t,a.frustum),this._cameraConfigs.enableMainLightShadowMap&&(h(!!f),this._addCascadedShadowMapPass(e,d,f,a)),this._cameraConfigs.singleForwardRadiancePass&&this.forwardLighting.addSpotlightShadowPasses(e,a,this._configs.mobileMaxSpotLightShadowMaps),this._tryAddReflectionProbePasses(e,d,f,a.scene),this._cameraConfigs.enablePostProcess){if(this._cameraConfigs.enableDOF){h(!!o.depthOfField.material);var m="DofRadiance"+d;this._addForwardRadiancePasses(e,d,a,n,l,f,m,p,!0,C.STORE),this._addDepthOfFieldPasses(e,o,o.depthOfField.material,d,a,n,l,m,p,g,u)}else this._addForwardRadiancePasses(e,d,a,n,l,f,g,p);if(this._cameraConfigs.enableBloom&&(h(!!o.bloom.material),this._addKawaseDualFilterBloomPasses(e,o,o.bloom.material,d,n,l,g)),this._cameraConfigs.enableFXAA){h(!!o.fxaa.material);var _=this._cameraConfigs.enableHDR||this._cameraConfigs.enableColorGrading,b=_?u:g;if(_&&this._addCopyAndTonemapPass(e,o,n,l,g,b),this._cameraConfigs.enableShadingScale){var S="AaColor"+d;this._addFxaaPass(e,o.fxaa.material,n,l,b,S),i=this._cameraConfigs.enableFSR&&o.fsr.material?this._addFsrPass(e,o,o.fsr.material,d,n,l,S,s,r,c):this._addCopyPass(e,s,r,S,c)}else i=this._addFxaaPass(e,o.fxaa.material,s,r,b,c)}else i=this._addTonemapResizeOrSuperResolutionPasses(e,o,d,n,l,g,u,s,r,c)}else this._cameraConfigs.enableHDR||this._cameraConfigs.enableShadingScale?(this._addForwardRadiancePasses(e,d,a,n,l,f,g,p),i=this._addTonemapResizeOrSuperResolutionPasses(e,o,d,n,l,g,u,s,r,c)):i=this._addForwardRadiancePasses(e,d,a,s,r,f,c,this._cameraConfigs.depthStencilName);this._addUIQueue(a,i)},g._addTonemapResizeOrSuperResolutionPasses=function(e,a,t,i,o,s,r,n,l,d){var c;return this._cameraConfigs.enableFSR&&a.fsr.material?(this._addCopyAndTonemapPass(e,a,i,o,s,r),c=this._addFsrPass(e,a,a.fsr.material,t,i,o,r,n,l,d)):c=this._addCopyAndTonemapPass(e,a,n,l,s,d),c},g._addCascadedShadowMapPass=function(e,a,t,i){var o=e.pipelineSceneData.shadows.size.x,s=e.pipelineSceneData.shadows.size.y;this._viewport.left=0,this._viewport.top=0,this._viewport.width=o,this._viewport.height=s;var r=e.addRenderPass(o,s,"default");r.name="CascadedShadowMap",r.addRenderTarget("ShadowMap"+a,T.CLEAR,C.STORE,new M(1,1,1,1)),r.addDepthStencil("ShadowDepth"+a,T.CLEAR,C.DISCARD);for(var n=e.pipelineSceneData.csmSupported?t.csmLevel:1,l=0;l!==n;++l){L(t,o,s,l,this._viewport,this._configs.screenSpaceSignY);var d=r.addQueue(I.NONE,"shadow-caster");this._configs.isWebGPU||d.setViewport(this._viewport),d.addScene(i,H.OPAQUE|H.MASK|H.SHADOW_CASTER).useLightFrustum(t,l)}},g._addCopyPass=function(e,a,t,i,o){var s=e.addRenderPass(a,t,"cc-tone-mapping");return s.addRenderTarget(o,T.CLEAR,C.STORE,this._clearColorTransparentBlack),s.addTexture(i,"inputTexture"),s.setVec4("g_platform",this._configs.platform),s.addQueue(I.OPAQUE).addFullscreenQuad(this._copyAndTonemapMaterial,1),s},g._addCopyAndTonemapPass=function(e,a,t,i,o,s){var r;if(this._cameraConfigs.enableColorGrading&&a.colorGrading.material&&a.colorGrading.colorGradingMap){var n=a.colorGrading.colorGradingMap;this._colorGradingTexSize.x=n.width,this._colorGradingTexSize.y=n.height;var l=n.width===n.height;(r=l?e.addRenderPass(t,i,"cc-color-grading-8x8"):e.addRenderPass(t,i,"cc-color-grading-nx1")).addRenderTarget(s,T.CLEAR,C.STORE,this._clearColorTransparentBlack),r.addTexture(o,"sceneColorMap"),r.setVec4("g_platform",this._configs.platform),r.setVec2("lutTextureSize",this._colorGradingTexSize),r.setFloat("contribute",a.colorGrading.contribute),r.addQueue(I.OPAQUE).addFullscreenQuad(a.colorGrading.material,l?1:0)}else(r=e.addRenderPass(t,i,"cc-tone-mapping")).addRenderTarget(s,T.CLEAR,C.STORE,this._clearColorTransparentBlack),r.addTexture(o,"inputTexture"),r.setVec4("g_platform",this._configs.platform),a.toneMapping.material?r.addQueue(I.OPAQUE).addFullscreenQuad(a.toneMapping.material,0):r.addQueue(I.OPAQUE).addFullscreenQuad(this._copyAndTonemapMaterial,0);return r},g._buildForwardMainLightPass=function(e,a,t,i,o,s,r,n){void 0===n&&(n=null),e.setViewport(this._viewport);var l=this._cameraConfigs.enableMSAA?C.DISCARD:C.STORE;O(t)?e.addRenderTarget(i,T.CLEAR,l,this._clearColor):e.addRenderTarget(i,T.LOAD,l),t.clearFlag&R.DEPTH_STENCIL?e.addDepthStencil(o,T.CLEAR,s,t.clearDepth,t.clearStencil,t.clearFlag&R.DEPTH_STENCIL):e.addDepthStencil(o,T.LOAD,s),this._cameraConfigs.enableMainLightShadowMap&&e.addTexture("ShadowMap"+a,"cc_shadowMap"),e.addQueue(I.NONE).addScene(t,H.OPAQUE|H.MASK,r||void 0,n||void 0)},g._addDepthOfFieldPasses=function(e,a,t,i,o,s,r,n,l,d,c){this._cocParams.x=a.depthOfField.focusDistance,this._cocParams.y=a.depthOfField.focusRange,this._cocParams.z=a.depthOfField.bokehRadius,this._cocParams.w=0,this._cocTexSize.x=1/s,this._cocTexSize.y=1/r,this._cocTexSize.z=s,this._cocTexSize.w=r;var h=Math.max(Math.floor(s/2),1),p=Math.max(Math.floor(r/2),1),g=c,u="DofPrefilter"+i,f="DofBokeh"+i,m="DofFilter"+i,_=e.addRenderPass(s,r,"cc-dof-coc");_.addRenderTarget(g,T.CLEAR,C.STORE,this._clearColorTransparentBlack),_.addTexture(l,"DepthTex"),_.setVec4("g_platform",this._configs.platform),_.setMat4("proj",o.matProj),_.setVec4("cocParams",this._cocParams),_.addQueue(I.OPAQUE).addCameraQuad(o,t,0);var b=e.addRenderPass(h,p,"cc-dof-prefilter");b.addRenderTarget(u,T.CLEAR,C.STORE,this._clearColorTransparentBlack),b.addTexture(n,"colorTex"),b.addTexture(g,"cocTex"),b.setVec4("g_platform",this._configs.platform),b.setVec4("mainTexTexelSize",this._cocTexSize),b.addQueue(I.OPAQUE).addFullscreenQuad(t,1);var S=e.addRenderPass(h,p,"cc-dof-bokeh");S.addRenderTarget(f,T.CLEAR,C.STORE,this._clearColorTransparentBlack),S.addTexture(u,"prefilterTex"),S.setVec4("g_platform",this._configs.platform),S.setVec4("mainTexTexelSize",this._cocTexSize),S.setVec4("cocParams",this._cocParams),S.addQueue(I.OPAQUE).addFullscreenQuad(t,2);var P=e.addRenderPass(h,p,"cc-dof-filter");P.addRenderTarget(m,T.CLEAR,C.STORE,this._clearColorTransparentBlack),P.addTexture(f,"bokehTex"),P.setVec4("g_platform",this._configs.platform),P.setVec4("mainTexTexelSize",this._cocTexSize),P.addQueue(I.OPAQUE).addFullscreenQuad(t,3);var R=e.addRenderPass(s,r,"cc-dof-combine");R.addRenderTarget(d,T.CLEAR,C.STORE,this._clearColorTransparentBlack),R.addTexture(n,"colorTex"),R.addTexture(g,"cocTex"),R.addTexture(m,"filterTex"),R.setVec4("g_platform",this._configs.platform),R.setVec4("cocParams",this._cocParams),R.addQueue(I.OPAQUE).addFullscreenQuad(t,4)},g._addKawaseDualFilterBloomPasses=function(e,a,t,i,o,s,r){var n=a.bloom.iterations,l=n+1;this._bloomWidths.length=l,this._bloomHeights.length=l,this._bloomWidths[0]=Math.max(Math.floor(o/2),1),this._bloomHeights[0]=Math.max(Math.floor(s/2),1);for(var d=1;d!==l;++d)this._bloomWidths[d]=Math.max(Math.floor(this._bloomWidths[d-1]/2),1),this._bloomHeights[d]=Math.max(Math.floor(this._bloomHeights[d-1]/2),1);this._bloomTexNames.length=l;for(var c=0;c!==l;++c)this._bloomTexNames[c]="BloomTex"+i+"_"+c;this._bloomParams.x=this._configs.useFloatOutput?1:0,this._bloomParams.x=0,this._bloomParams.z=a.bloom.threshold,this._bloomParams.w=a.bloom.enableAlphaMask?1:0;var h=e.addRenderPass(this._bloomWidths[0],this._bloomHeights[0],"cc-bloom-prefilter");h.addRenderTarget(this._bloomTexNames[0],T.CLEAR,C.STORE,this._clearColorTransparentBlack),h.addTexture(r,"inputTexture"),h.setVec4("g_platform",this._configs.platform),h.setVec4("bloomParams",this._bloomParams),h.addQueue(I.OPAQUE).addFullscreenQuad(t,0);for(var p=1;p!==l;++p){var g=e.addRenderPass(this._bloomWidths[p],this._bloomHeights[p],"cc-bloom-downsample");g.addRenderTarget(this._bloomTexNames[p],T.CLEAR,C.STORE,this._clearColorTransparentBlack),g.addTexture(this._bloomTexNames[p-1],"bloomTexture"),this._bloomTexSize.x=this._bloomWidths[p-1],this._bloomTexSize.y=this._bloomHeights[p-1],g.setVec4("g_platform",this._configs.platform),g.setVec4("bloomTexSize",this._bloomTexSize),g.addQueue(I.OPAQUE).addFullscreenQuad(t,1)}for(var u=n;u-- >0;){var f=e.addRenderPass(this._bloomWidths[u],this._bloomHeights[u],"cc-bloom-upsample");f.addRenderTarget(this._bloomTexNames[u],T.CLEAR,C.STORE,this._clearColorTransparentBlack),f.addTexture(this._bloomTexNames[u+1],"bloomTexture"),this._bloomTexSize.x=this._bloomWidths[u+1],this._bloomTexSize.y=this._bloomHeights[u+1],f.setVec4("g_platform",this._configs.platform),f.setVec4("bloomTexSize",this._bloomTexSize),f.addQueue(I.OPAQUE).addFullscreenQuad(t,2)}var m=e.addRenderPass(o,s,"cc-bloom-combine");m.addRenderTarget(r,T.LOAD,C.STORE),m.addTexture(this._bloomTexNames[0],"bloomTexture"),m.setVec4("g_platform",this._configs.platform),m.setVec4("bloomParams",this._bloomParams),m.addQueue(I.BLEND).addFullscreenQuad(t,3)},g._addFsrPass=function(e,a,t,i,o,s,r,n,l,d){this._fsrTexSize.x=o,this._fsrTexSize.y=s,this._fsrTexSize.z=n,this._fsrTexSize.w=l,this._fsrParams.x=p(1-a.fsr.sharpness,.02,.98);var c="FsrColor"+i,h=e.addRenderPass(n,l,"cc-fsr-easu");h.addRenderTarget(c,T.CLEAR,C.STORE,this._clearColorTransparentBlack),h.addTexture(r,"outputResultMap"),h.setVec4("g_platform",this._configs.platform),h.setVec4("fsrTexSize",this._fsrTexSize),h.addQueue(I.OPAQUE).addFullscreenQuad(t,0);var g=e.addRenderPass(n,l,"cc-fsr-rcas");return g.addRenderTarget(d,T.CLEAR,C.STORE,this._clearColorTransparentBlack),g.addTexture(c,"outputResultMap"),g.setVec4("g_platform",this._configs.platform),g.setVec4("fsrTexSize",this._fsrTexSize),g.setVec4("fsrParams",this._fsrParams),g.addQueue(I.OPAQUE).addFullscreenQuad(t,1),g},g._addFxaaPass=function(e,a,t,i,o,s){this._fxaaParams.x=t,this._fxaaParams.y=i,this._fxaaParams.z=1/t,this._fxaaParams.w=1/i;var r=e.addRenderPass(t,i,"cc-fxaa");return r.addRenderTarget(s,T.CLEAR,C.STORE,this._clearColorTransparentBlack),r.addTexture(o,"sceneColorMap"),r.setVec4("g_platform",this._configs.platform),r.setVec4("texSize",this._fxaaParams),r.addQueue(I.OPAQUE).addFullscreenQuad(a,0),r},g._addUIQueue=function(e,a){var t=H.UI;this._cameraConfigs.enableProfiler&&(t|=H.PROFILER,a.showStatistics=!0),a.addQueue(I.BLEND,"default","default").addScene(e,t)},g._addForwardRadiancePasses=function(e,a,t,i,o,s,r,n,l,d){void 0===l&&(l=!1),void 0===d&&(d=C.DISCARD);var c=t.clearColor;this._clearColor.x=c.x,this._clearColor.y=c.y,this._clearColor.z=c.z,this._clearColor.w=c.w;var p=t.viewport;this._viewport.left=Math.round(p.x*i),this._viewport.top=Math.round(p.y*o),this._viewport.width=Math.max(Math.round(p.width*i),1),this._viewport.height=Math.max(Math.round(p.height*o),1);var g=!l&&this._cameraConfigs.enableMSAA;h(!g||this._cameraConfigs.singleForwardRadiancePass);var u=this._cameraConfigs.singleForwardRadiancePass?this._addForwardSingleRadiancePass(e,a,t,g,i,o,s,r,n,d):this._addForwardMultipleRadiancePasses(e,a,t,i,o,s,r,n,d);this._cameraConfigs.enableMainLightPlanarShadowMap&&this.addPlanarShadowQueue(t,s,u);var f=H.BLEND|(t.geometryRenderer?H.GEOMETRY:H.NONE);return u.addQueue(I.BLEND).addScene(t,f,s||void 0),u},g._addForwardSingleRadiancePass=function(e,a,t,i,o,s,r,n,l,d){var c;if(h(this._cameraConfigs.singleForwardRadiancePass),i){var p="MsaaRadiance"+a,g="MsaaDepthStencil"+a,u=this._cameraConfigs.settings.msaa.sampleCount,f=e.addMultisampleRenderPass(o,s,u,0,"default");f.name="MsaaForwardPass",this._buildForwardMainLightPass(f,a,t,p,g,C.DISCARD,r),f.resolveRenderTarget(p,n),c=f}else(c=e.addRenderPass(o,s,"default")).name="ForwardPass",this._buildForwardMainLightPass(c,a,t,n,l,d,r);return h(void 0!==c),this.forwardLighting.addLightQueues(c,t,this._configs.mobileMaxSpotLightShadowMaps),c},g.addPlanarShadowQueue=function(e,a,t){t.addQueue(I.BLEND,"planar-shadow").addScene(e,H.SHADOW_CASTER|H.PLANAR_SHADOW|H.BLEND,a||void 0)},g._addForwardMultipleRadiancePasses=function(e,a,t,i,o,s,r,n,l){h(!this._cameraConfigs.singleForwardRadiancePass);var d=e.addRenderPass(i,o,"default");d.name="ForwardPass";var c=this.forwardLighting.isMultipleLightPassesNeeded()?C.STORE:l;return this._buildForwardMainLightPass(d,a,t,r,n,c,s),this.forwardLighting.addLightPasses(r,n,l,a,i,o,t,this._viewport,e,d)},g._buildReflectionProbePass=function(e,a,t,i,o,r,n){void 0===n&&(n=null);var l=this._cameraConfigs.enableMSAA?C.DISCARD:C.STORE;if(O(t)){this._reflectionProbeClearColor.x=t.clearColor.x,this._reflectionProbeClearColor.y=t.clearColor.y,this._reflectionProbeClearColor.z=t.clearColor.z;var d=s.packRGBE(this._reflectionProbeClearColor);this._clearColor.x=d.x,this._clearColor.y=d.y,this._clearColor.z=d.z,this._clearColor.w=d.w,e.addRenderTarget(i,T.CLEAR,l,this._clearColor)}else e.addRenderTarget(i,T.LOAD,l);t.clearFlag&R.DEPTH_STENCIL?e.addDepthStencil(o,T.CLEAR,C.DISCARD,t.clearDepth,t.clearStencil,t.clearFlag&R.DEPTH_STENCIL):e.addDepthStencil(o,T.LOAD,C.DISCARD),this._cameraConfigs.enableMainLightShadowMap&&e.addTexture("ShadowMap"+a,"cc_shadowMap"),e.addQueue(I.NONE,"reflect-map").addScene(t,H.OPAQUE|H.MASK|H.REFLECTION_PROBE,r||void 0,n||void 0)},g._tryAddReflectionProbePasses=function(t,s,r,n){var l=a.internal.reflectionProbeManager;if(l)for(var d,c=l.getProbes(),h=0,p=e(c);!(d=p()).done;){var g=d.value;if(g.needRender){var u=g.renderArea(),f=Math.max(Math.floor(u.x),1),m=Math.max(Math.floor(u.y),1);if(g.probeType===o.scene.ProbeType.PLANAR){if(!this._cameraConfigs.enablePlanarReflectionProbe)continue;var _=g.realtimePlanarTexture.window,b="PlanarProbeRT"+h,S="PlanarProbeDS"+h;t.addRenderWindow(b,this._cameraConfigs.radianceFormat,f,m,_),t.addDepthStencil(S,i.Format.DEPTH_STENCIL,f,m,V.MEMORYLESS);var P=t.addRenderPass(f,m,"default");P.name="PlanarReflectionProbe"+h,this._buildReflectionProbePass(P,s,g.camera,b,S,r,n)}if(4==++h)break}}},g._initMaterials=function(e){return this._initialized?0:(B(e,this._configs),this._copyAndTonemapMaterial._uuid="builtin-pipeline-tone-mapping-material",this._copyAndTonemapMaterial.initialize({effectName:"pipeline/post-process/tone-mapping"}),this._copyAndTonemapMaterial.effectAsset&&(this._initialized=!0),this._initialized?0:1)},t}();s.setCustomPipeline("Builtin",new j)}a._RF.pop()}}})),System.register("chunks:///_virtual/internal",["./builtin-pipeline-settings.ts","./builtin-pipeline-types.ts","./builtin-pipeline.ts"],(function(){return{setters:[null,null,null],execute:function(){}}})),r="virtual:///prerequisite-imports/internal",n="chunks:///_virtual/internal",System.register(r,[n],(function(e,a){return{setters:[function(a){var t={};for(var i in a)"default"!==i&&"__esModule"!==i&&(t[i]=a[i]);e(t)}],execute:function(){}}})),e("default",i.exports)}),{})}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=.js",["./index.js","./cjs-loader.mjs"],(function(e,t){var r,n;return{setters:[function(t){r=t.__cjsMetaURL;var n={};n.__cjsMetaURL=t.__cjsMetaURL,n.default=t.default,e(n)},function(e){n=e.default}],execute:function(){r||n.throwInvalidWrapper("./index.js",t.meta.url),n.require(r)}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=2.js",["./index2.js","./cjs-loader.mjs"],(function(e,t){var r,n;return{setters:[function(t){r=t.__cjsMetaURL;var n={};n.__cjsMetaURL=t.__cjsMetaURL,n.default=t.default,e(n)},function(e){n=e.default}],execute:function(){r||n.throwInvalidWrapper("./index.js",t.meta.url),n.require(r)}}}));

System.register("chunks:///_virtual/index2.js",["./cjs-loader.mjs"],(function(e,t){var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0);var r=e("__cjsMetaURL",t.meta.url);n.define(r,(function(t,n,r,i,o){var a,s;System.register("chunks:///_virtual/FloatingText.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,s,l,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,l=e.Color,c=e.tween,u=e.Vec3,p=e.Component}],execute:function(){var f,h,g,b;o._RF.push({},"bd2afV6GjdEioGJ6Sb+apw4","FloatingText",void 0);var d=a.ccclass,m=a.property;e("FloatingText",d("FloatingText")((g=t((h=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"duration",g,i(t)),r(t,"moveUpDistance",b,i(t)),t}return n(t,e),t.prototype.start=function(){var e=this,t=this.getComponent(s)||this.getComponentInChildren(s);t&&(t.color=new l(t.color.r,t.color.g,t.color.b,255),c(t).to(this.duration,{color:new l(t.color.r,t.color.g,t.color.b,0)}).start(),c(this.node).by(this.duration,{position:new u(0,this.moveUpDistance,0)}).call((function(){e.node.destroy()})).start())},t}(p)).prototype,"duration",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),b=t(h.prototype,"moveUpDistance",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),f=h))||f),o._RF.pop()}}})),System.register("chunks:///_virtual/FriendsPage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,s,l,c,u,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.ScrollView,u=e.Prefab,p=e.Label,f=e.instantiate,h=e.Component}],execute:function(){var g,b,d,m,y,L,v,k,w,P;s._RF.push({},"829ce7RYglPV6kmQF/Wbmbm","FriendsPage",void 0);var T=l.ccclass,x=l.property;e("FriendsPage",(g=T("FriendsPage"),b=x(c),d=x(u),m=x(p),g((v=t((L=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"scrollView",v,i(t)),r(t,"friendItemPrefab",k,i(t)),r(t,"totalFriendsLabel",w,i(t)),r(t,"apiBaseUrl",P,i(t)),t.userId=777270195,t}n(t,e);var s=t.prototype;return s.start=function(){this.fetchFriends()},s.fetchFriends=function(){var e=o(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiBaseUrl+"/"+this.userId);case 3:if((t=e.sent).ok){e.next=9;break}if(404!==t.status){e.next=8;break}return this.totalFriendsLabel.string="У тебя пока нет друзей",e.abrupt("return");case 8:throw new Error("Network response was not ok");case 9:return e.next=11,t.json();case 11:n=e.sent,console.log("Fetched friends:",n),this.totalFriendsLabel.string="У тебя "+n.length+" друзей",this.populateFriendsList(n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Ошибка при загрузке списка друзей:",e.t0),this.totalFriendsLabel.string="Не удалось загрузить список друзей.";case 21:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),s.populateFriendsList=function(e){var t=this,n=this.scrollView.content;console.log("Populating friends list with",e.length,"friends."),n.removeAllChildren(),e.forEach((function(e,r){console.log("Adding friend "+(r+1)+":",e);var i=f(t.friendItemPrefab);i.parent=n;var o=i.getComponentsInChildren(p);console.log("Found "+o.length+" Label components in FriendItem.");var a=null,s=null,l=null;o.forEach((function(e){var t=e.node.name;"UsernameLabel"===t?a=e:"NumberLabel"===t?s=e:"CoinsLabel"===t&&(l=e)})),a&&s&&l?(a.string=e.username,s.string=r+1+".",l.string=t.formatCoins(e.coins),console.log("Set Username: "+e.username+", Number: "+(r+1)+", Coins: "+e.coins)):(console.warn("Не удалось найти один из Label компонентов в FriendItem"),console.log("Найденные Label узлы:",o.map((function(e){return e.node.name}))))}))},s.formatCoins=function(e){return e>=1e6?Math.round(e/1e6)+"M":Math.round(e).toLocaleString()},t}(h)).prototype,"scrollView",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(L.prototype,"friendItemPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(L.prototype,"totalFriendsLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(L.prototype,"apiBaseUrl",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://dev.simatap.ru/api/referrals"}}),y=L))||y)),s._RF.pop()}}})),System.register("chunks:///_virtual/IncomeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,s,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.Component}],execute:function(){var p,f,h,g,b;s._RF.push({},"a3599luME5HILUcjWVa3vL6","IncomeManager",void 0);var d=l.ccclass,m=l.property;e("IncomeManager",(p=d("IncomeManager"),f=m(c),p((b=t((g=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"incomeLabel",b,i(t)),t.apiUrl="https://dev.simatap.ru/api/upgrades?userId=777270195",t}n(t,e);var s=t.prototype;return s.start=function(){this.incomeLabel?this.fetchIncomeData():console.error("incomeLabel не назначен в IncomeManager.")},s.fetchIncomeData=function(){var e=o(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiUrl);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP error! status: "+t.status);case 6:return e.next=8,t.json();case 8:n=e.sent,r=this.calculateTotalIncome(n),i=this.formatIncome(r),this.updateIncomeLabel(i),console.log("Общий доход: "+i),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Ошибка при получении данных с API:",e.t0),this.updateIncomeLabel("+ 0 доход в час");case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),s.calculateTotalIncome=function(e){return e.reduce((function(e,t){return e+(t.cumulative_income||0)}),0)},s.formatIncome=function(e){return e>=1e3?"+ "+(e/1e3).toFixed(0)+"K доход в час":"+ "+e+" доход в час"},s.updateIncomeLabel=function(e){this.incomeLabel.string=e},t}(u)).prototype,"incomeLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h)),s._RF.pop()}}})),System.register("chunks:///_virtual/LeadersPage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,s,l,c,u,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.ScrollView,u=e.Prefab,p=e.Label,f=e.instantiate,h=e.Component}],execute:function(){var g,b,d,m,y,L,v,k,w,P,T,x,C,I;s._RF.push({},"509aaKVAOZOU4SArmn1DqkK","LeadersPage",void 0);var z=l.ccclass,F=l.property;e("LeaderBoardPage",(g=z("LeaderBoardPage"),b=F(c),d=F(u),m=F(p),y=F(p),L=F(p),g((w=t((k=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"scrollView",w,i(t)),r(t,"leaderItemPrefab",P,i(t)),r(t,"currentRankLabel",T,i(t)),r(t,"currentUsernameLabel",x,i(t)),r(t,"currentCoinsLabel",C,i(t)),r(t,"apiBaseUrl",I,i(t)),t.userId=777270195,t}n(t,e);var s=t.prototype;return s.start=function(){this.fetchLeaders()},s.fetchLeaders=function(){var e=o(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiBaseUrl+"?userId="+this.userId);case 3:if((t=e.sent).ok){e.next=9;break}if(404!==t.status){e.next=8;break}return console.warn("Топ-лидеров пока нет."),e.abrupt("return");case 8:throw new Error("Network response was not ok");case 9:return e.next=11,t.json();case 11:n=e.sent,console.log("Fetched leaderboard data:",n),this.populateLeadersList(n.top50),n.currentUser&&this.displayCurrentUser(n.currentUser),this.scrollView&&this.scrollView.scrollToTop(0,!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Ошибка при загрузке списка лидеров:",e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),s.populateLeadersList=function(e){var t=this,n=this.scrollView.content;console.log("Populating leaderboard list with",e.length,"leaders."),n.removeAllChildren(),e.forEach((function(e,r){console.log("Adding leader "+e.rank+":",e);var i=f(t.leaderItemPrefab);i.parent=n;var o=i.getComponentsInChildren(p);console.log("Found "+o.length+" Label components in LeaderItem.");var a=null,s=null,l=null;o.forEach((function(e){var t=e.node.name;"NumberLabel"===t?a=e:"UsernameLabel"===t?s=e:"CoinsLabel"===t&&(l=e)})),a&&s&&l?(a.string="#"+e.rank,s.string=e.username,l.string=t.formatCoins(e.coins),console.log("Set Number: "+e.rank+", Username: "+e.username+", Coins: "+e.coins)):(console.warn("Не удалось найти один из Label компонентов в LeaderItem"),console.log("Найденные Label узлы:",o.map((function(e){return e.node.name}))))}))},s.displayCurrentUser=function(e){this.currentRankLabel?this.currentRankLabel.string="#"+e.rank:console.warn("currentRankLabel не назначен в LeaderBoardPage."),this.currentUsernameLabel?this.currentUsernameLabel.string=""+e.username:console.warn("currentUsernameLabel не назначен в LeaderBoardPage."),this.currentCoinsLabel?this.currentCoinsLabel.string=""+this.formatCoins(e.coins):console.warn("currentCoinsLabel не назначен в LeaderBoardPage.")},s.formatCoins=function(e){return e>=1e6?Math.round(e/1e6)+"M":Math.round(e).toLocaleString("ru-RU")},t}(h)).prototype,"scrollView",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"leaderItemPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(k.prototype,"currentRankLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(k.prototype,"currentUsernameLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(k.prototype,"currentCoinsLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(k.prototype,"apiBaseUrl",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://dev.simatap.ru/api/users/leaders"}}),v=k))||v)),s._RF.pop()}}})),System.register("chunks:///_virtual/main",["./SpineController.ts.ts","./FloatingText.ts","./FriendsPage.ts","./IncomeManager.ts","./LeadersPage.ts","./ReferralLinkManager.ts","./SocketManager.ts","./TabBarController.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}})),System.register("chunks:///_virtual/ReferralLinkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,s,l,c,u,p,f,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Node,u=e.Label,p=e.Vec3,f=e.Component,h=e.Color,g=e.tween}],execute:function(){var b,d,m,y,L,v,k,w,P,T,x,C,I;s._RF.push({},"18bc3yUuD1GYI5rJViGJcp5","ReferralLinkManager",void 0);var z=l.ccclass,F=l.property;e("ReferralLinkManager",(b=z("ReferralLinkManager"),d=F(c),m=F(c),y=F(u),L=F(u),b((w=t((k=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"generateLinkNode",w,i(t)),r(t,"copyLinkNode",P,i(t)),r(t,"referralLinkLabel",T,i(t)),r(t,"copyNotificationLabel",x,i(t)),t.referralLink="",t.userId=777270195,r(t,"animationDuration",C,i(t)),r(t,"moveUpDistance",I,i(t)),t.initialPosition=new p,t}n(t,e);var s=t.prototype;return s.start=function(){this.generateLinkNode||console.error("generateLinkNode не назначен в ReferralLinkManager."),this.copyLinkNode||console.error("copyLinkNode не назначен в ReferralLinkManager."),this.referralLinkLabel||console.error("referralLinkLabel не назначен в ReferralLinkManager."),this.copyNotificationLabel||console.error("copyNotificationLabel не назначен в ReferralLinkManager."),this.generateLinkNode&&this.generateLinkNode.on(c.EventType.TOUCH_END,this.onGenerateLinkClicked,this),this.copyLinkNode&&(this.copyLinkNode.on(c.EventType.TOUCH_END,this.onCopyLinkClicked,this),this.copyLinkNode.active=!1),this.copyNotificationLabel&&(this.copyNotificationLabel.node.active=!1,this.initialPosition=this.copyNotificationLabel.node.position.clone())},s.onGenerateLinkClicked=function(){this.referralLink=this.getReferralLink(this.userId),this.referralLinkLabel.string=this.referralLink,console.log("Реферальная ссылка создана: "+this.referralLink),this.copyLinkNode&&(this.copyLinkNode.active=!0)},s.getReferralLink=function(e){return"https://t.me/misapatStage_bot?startapp=refId"+e},s.onCopyLinkClicked=function(){var e=o(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.copyNotificationLabel&&(this.copyNotificationLabel.node.active=!0,this.copyNotificationLabel.color=new h(255,255,255,255),this.copyNotificationLabel.node.setPosition(this.initialPosition.clone()),g(this.copyNotificationLabel).to(this.animationDuration,{color:new h(255,255,255,0)}).start(),g(this.copyNotificationLabel.node).by(this.animationDuration,{position:new p(0,this.moveUpDistance,0)}).call((function(){t.copyNotificationLabel.node.active=!1,t.copyNotificationLabel.color=new h(255,255,255,255),t.copyNotificationLabel.node.setPosition(t.initialPosition.clone())})).start()),this.referralLink){e.next=4;break}return console.warn("Реферальная ссылка не создана."),e.abrupt("return");case 4:return e.prev=4,e.next=7,navigator.clipboard.writeText(this.referralLink);case 7:console.log("Реферальная ссылка скопирована в буфер обмена."),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error("Не удалось скопировать ссылку: ",e.t0);case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),t}(f)).prototype,"generateLinkNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"copyLinkNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(k.prototype,"referralLinkLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(k.prototype,"copyNotificationLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(k.prototype,"animationDuration",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),I=t(k.prototype,"moveUpDistance",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),v=k))||v)),s._RF.pop()}}})),System.register("chunks:///_virtual/SocketManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,s,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,l=e.ProgressBar,c=e.Color,u=e.Component}],execute:function(){var p,f,h,g,b,d,m,y,L,v,k;o._RF.push({},"a0c39VZ6j5NRrT6cxMHqDGB","SocketManager",void 0);var w=a.ccclass,P=a.property;e("SocketManager",(p=w("SocketManager"),f=P(s),h=P(l),g=P(s),b=P(s),p((y=t((m=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"coinsLabel",y,i(t)),r(t,"energyProgressBar",L,i(t)),r(t,"energyValueLabel",v,i(t)),r(t,"messagesLabel",k,i(t)),t.socket=null,t.userId=777270195,t.maxEnergy=2e3,t.currentEnergy=0,t}n(t,e);var o=t.prototype;return o.start=function(){this.coinsLabel&&this.energyProgressBar&&this.energyValueLabel&&this.messagesLabel&&(this.autoConnect(),this.showUserInfo(!1))},o.onDestroy=function(){this.socket&&this.socket.disconnect()},o.autoConnect=function(){var e=this;try{this.socket=io("https://dev.simatap.ru",{transports:["websocket"],secure:!0,rejectUnauthorized:!1}),this.socket.on("connect",(function(){e.socket.emit("register",{userId:e.userId}),e.showUserInfo(!0)})),this.socket.on("disconnect",(function(){e.showMessage("Отключено от сервера.","danger"),e.showUserInfo(!1)})),this.socket.on("energyUpdated",(function(t){e.updateEnergy(t.energy_left)})),this.socket.on("coinsUpdated",(function(t){var n=Math.round(t.coins);e.coinsLabel.string=n.toLocaleString()})),this.socket.on("tapError",(function(t){e.showMessage(t.message,"warning")})),this.socket.on("registrationError",(function(t){e.showMessage(t.message,"danger"),e.showUserInfo(!1)})),this.socket.on("connect_error",(function(t){e.showMessage("Ошибка подключения к серверу.","danger")}))}catch(e){this.showMessage("Ошибка подключения к серверу.","danger")}},o.onTap=function(){this.userId?this.socket&&this.socket.connected?(this.socket.emit("tap",{userId:this.userId}),this.showMessage("Тап отправлен!","info")):this.showMessage("Соединение с сервером отсутствует.","danger"):this.showMessage("Пользователь не подключен.","danger")},o.showMessage=function(e,t){if(void 0===t&&(t="info"),this.messagesLabel)switch(this.messagesLabel.string=e,t){case"success":this.messagesLabel.node.color=new c(0,255,0);break;case"danger":this.messagesLabel.node.color=new c(255,0,0);break;case"warning":this.messagesLabel.node.color=new c(255,165,0);break;default:this.messagesLabel.node.color=new c(255,255,255)}},o.showUserInfo=function(e){this.coinsLabel&&this.energyProgressBar&&this.energyValueLabel&&(this.coinsLabel.node.active=e,this.energyProgressBar.node.active=e,this.energyValueLabel.node.active=e)},o.updateEnergy=function(e){e=Math.max(0,Math.min(this.maxEnergy,e)),this.currentEnergy=e;var t=e/this.maxEnergy;this.energyProgressBar.progress=t,this.energyValueLabel.string=e+"/"+this.maxEnergy},o.getCurrentEnergy=function(){return this.currentEnergy},t}(u)).prototype,"coinsLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(m.prototype,"energyProgressBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(m.prototype,"energyValueLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(m.prototype,"messagesLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d)),o._RF.pop()}}})),System.register("chunks:///_virtual/SpineController.ts.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketManager.ts"],(function(e){var t,n,r,i,o,a,s,l,c,u,p,f,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.sp,l=e.Prefab,c=e.UITransform,u=e.Node,p=e.Vec3,f=e.instantiate,h=e.Component},function(e){g=e.SocketManager}],execute:function(){var b,d,m,y,L,v,k,w,P;o._RF.push({},"7af28zZEkNKYY1uSBPGocx/","SpineController.ts",void 0);var T=a.ccclass,x=a.property;e("SpineController",(b=T("SpineController"),d=x(s.Skeleton),m=x(g),y=x(l),b((k=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"spine",k,i(t)),r(t,"socketManager",w,i(t)),r(t,"floatingTextPrefab",P,i(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){var e=this.getComponent(c);e||(e=this.addComponent(c)),e.setContentSize(4e3,3e3),e.setAnchorPoint(.553265,.004952),this.node.on(u.EventType.TOUCH_END,this.onSpineClicked,this),this.spine?(this.spine.setAnimation(0,"Основная",!0),this.spine.setCompleteListener(this.onAnimationComplete.bind(this))):console.warn("Spine компонент не установлен в SpineController.")},o.onSpineClicked=function(e){console.log("Spine animation clicked"),this.spine&&(this.spine.setAnimation(1,"Нажатие",!1),this.spine.addAnimation(1,"Основная",!0,0)),this.socketManager?(console.log("Calling socketManager.onTap()"),this.socketManager.onTap()):console.warn("SocketManager не установлен в SpineController.");var t=e.getUILocation();console.log("Tap Position (UILocation):",t),this.spawnFloatingText(t)},o.onAnimationComplete=function(e){e&&1===e.trackIndex&&this.spine.setAnimation(1,"Основная",!0)},o.spawnFloatingText=function(e){if(this.floatingTextPrefab){var t=this.node.scene.getChildByName("Canvas");if(t){var n=t.getComponent(c);if(n){var r=n.contentSize;console.log("Canvas Size:",r);var i=e.x-r.width/2,o=e.y-r.height/2,a=new p(i,o,100);console.log("Converted Local Position:",a);var s=f(this.floatingTextPrefab);s.setParent(t),s.setPosition(a),console.log("FloatingText Position Set To:",s.getPosition())}else console.warn("UITransform не найден на Canvas.")}else console.warn("Canvas не найден.")}else console.warn("floatingTextPrefab не установлен в SpineController.")},t}(h)).prototype,"spine",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"socketManager",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(v.prototype,"floatingTextPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=v))||L)),o._RF.pop()}}})),System.register("chunks:///_virtual/TabBarController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,s,l,c,u,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Node,l=e.Label,c=e.UIOpacity,u=e.tween,p=e.Vec3,f=e.Color,h=e.Component}],execute:function(){var g,b,d,m,y,L,v,k,w,P,T,x,C,I,z,F,S,M,U,N,_,D,R,E,B,H,A,V,j,G,O,Y,W,K,Z,q,J,Q,X,$,ee,te,ne;o._RF.push({},"40497KNIRZM96W3FB/cr0rR","TabBarController",void 0);var re=a.ccclass,ie=a.property;e("TabBarController",(g=re("TabBarController"),b=ie(s),d=ie(s),m=ie(s),y=ie(s),L=ie(s),v=ie(s),k=ie(s),w=ie(s),P=ie(s),T=ie(s),x=ie(l),C=ie(l),I=ie(l),z=ie(l),F=ie(l),S=ie(s),M=ie(s),U=ie(s),N=ie(s),_=ie(s),g((E=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"mainPage",E,i(t)),r(t,"friendsPage",B,i(t)),r(t,"storePage",H,i(t)),r(t,"leadersPage",A,i(t)),r(t,"tasksPage",V,i(t)),r(t,"iconHome",j,i(t)),r(t,"iconFriends",G,i(t)),r(t,"iconStore",O,i(t)),r(t,"iconLeaders",Y,i(t)),r(t,"iconTasks",W,i(t)),r(t,"textHome",K,i(t)),r(t,"textFriends",Z,i(t)),r(t,"textStore",q,i(t)),r(t,"textLeaders",J,i(t)),r(t,"textTasks",Q,i(t)),r(t,"buttonHome",X,i(t)),r(t,"buttonFriends",$,i(t)),r(t,"buttonLeaders",ee,i(t)),r(t,"buttonTasks",te,i(t)),r(t,"activeButton",ne,i(t)),t.currentTab="home",t}n(t,e);var o=t.prototype;return o.onLoad=function(){var e=this;this.checkProperties(),this.showPage(this.currentTab,!1),this.iconHome.on(s.EventType.TOUCH_END,(function(){e.showPage("home",!0)})),this.iconFriends.on(s.EventType.TOUCH_END,(function(){e.showPage("friends",!0)})),this.iconStore.on(s.EventType.TOUCH_END,(function(){e.showPage("store",!0)})),this.iconLeaders.on(s.EventType.TOUCH_END,(function(){e.showPage("leaders",!0)})),this.iconTasks.on(s.EventType.TOUCH_END,(function(){e.showPage("tasks",!0)}))},o.checkProperties=function(){[{name:"mainPage",value:this.mainPage},{name:"friendsPage",value:this.friendsPage},{name:"storePage",value:this.storePage},{name:"leadersPage",value:this.leadersPage},{name:"tasksPage",value:this.tasksPage},{name:"iconHome",value:this.iconHome},{name:"iconFriends",value:this.iconFriends},{name:"iconStore",value:this.iconStore},{name:"iconLeaders",value:this.iconLeaders},{name:"iconTasks",value:this.iconTasks},{name:"textHome",value:this.textHome},{name:"textFriends",value:this.textFriends},{name:"textStore",value:this.textStore},{name:"textLeaders",value:this.textLeaders},{name:"textTasks",value:this.textTasks},{name:"buttonHome",value:this.buttonHome},{name:"buttonFriends",value:this.buttonFriends},{name:"buttonLeaders",value:this.buttonLeaders},{name:"buttonTasks",value:this.buttonTasks},{name:"activeButton",value:this.activeButton}].forEach((function(e){e.value||console.warn('Property "'+e.name+'" is not assigned in the inspector.')}))},o.showPage=function(e,t){void 0===t&&(t=!0),e!==this.currentTab&&(this.hidePage(this.currentTab,t),this.showNewPage(e,t),this.updateTabUI(e),this.currentTab=e)},o.hidePage=function(e,t){var n=this.getPageNode(e);if(n){var r=n.getComponent(c);r||(console.warn('UIOpacity component not found on "'+e+'" page. Adding one.'),r=n.addComponent(c)),t?(u(n).to(.3,{scale:new p(.95,.95,1)}).start(),u(r).to(.3,{opacity:0}).call((function(){n.active=!1,n.setScale(1,1,1),r.opacity=255,console.log('Page "'+e+'" скрыта.')})).start()):(n.active=!1,r.opacity=255,console.log('Page "'+e+'" скрыта без анимации.'))}else console.error('Page node for "'+e+'" not found.')},o.showNewPage=function(e,t){var n=this.getPageNode(e);if(n){n.active=!0;var r=n.getComponent(c);r||(console.warn('UIOpacity component not found on "'+e+'" page. Adding one.'),r=n.addComponent(c)),t?(r.opacity=0,n.setScale(.95,.95,1),u(r).to(.3,{opacity:255}).start(),u(n).to(.3,{scale:new p(1.05,1.05,1)}).to(.3,{scale:new p(1,1,1)}).call((function(){console.log('Page "'+e+'" показана.')})).start()):(r.opacity=255,n.setScale(1,1,1),console.log('Page "'+e+'" показана без анимации.'))}else console.error('Page node for "'+e+'" not found.')},o.getPageNode=function(e){switch(e){case"home":return this.mainPage;case"friends":return this.friendsPage;case"store":return this.storePage;case"leaders":return this.leadersPage;case"tasks":return this.tasksPage;default:return console.warn("Unknown page: "+e),null}},o.updateTabUI=function(e){switch(this.textHome.color=f.GRAY,this.textFriends.color=f.GRAY,this.textStore.color=f.GRAY,this.textLeaders.color=f.GRAY,this.textTasks.color=f.GRAY,this.activeButton.active=!1,this.buttonHome.active=!1,this.buttonFriends.active=!1,this.buttonLeaders.active=!1,this.buttonTasks.active=!1,e){case"home":this.textHome.color=f.WHITE,this.buttonHome.active=!0;break;case"friends":this.textFriends.color=f.WHITE,this.buttonFriends.active=!0;break;case"store":this.textStore.color=f.WHITE,this.activeButton.active=!0;break;case"leaders":this.textLeaders.color=f.WHITE,this.buttonLeaders.active=!0;break;case"tasks":this.textTasks.color=f.WHITE,this.buttonTasks.active=!0}},t}(h)).prototype,"mainPage",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(R.prototype,"friendsPage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(R.prototype,"storePage",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(R.prototype,"leadersPage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(R.prototype,"tasksPage",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(R.prototype,"iconHome",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(R.prototype,"iconFriends",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(R.prototype,"iconStore",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(R.prototype,"iconLeaders",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(R.prototype,"iconTasks",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(R.prototype,"textHome",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(R.prototype,"textFriends",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(R.prototype,"textStore",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(R.prototype,"textLeaders",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(R.prototype,"textTasks",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(R.prototype,"buttonHome",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(R.prototype,"buttonFriends",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(R.prototype,"buttonLeaders",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(R.prototype,"buttonTasks",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(R.prototype,"activeButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=R))||D)),o._RF.pop()}}})),a="virtual:///prerequisite-imports/main",s="chunks:///_virtual/main",System.register(a,[s],(function(e,t){return{setters:[function(t){var n={};for(var r in t)"default"!==r&&"__esModule"!==r&&(n[r]=t[r]);e(n)}],execute:function(){}}})),e("default",r.exports)}),{})}}}));

System.register("chunks:///_virtual/LeadersPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketManager.ts"],(function(e){var r,n,t,a,o,i,s,l,c,u,p,b,d,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.ScrollView,u=e.Prefab,p=e.Label,b=e.instantiate,d=e.Component},function(e){f=e.SocketManager}],execute:function(){var g,h,L,m,w,k,v,y,U,C,P,I,S,B;s._RF.push({},"509aaKVAOZOU4SArmn1DqkK","LeadersPage",void 0);var M=l.ccclass,R=l.property;e("LeaderBoardPage",(g=M("LeaderBoardPage"),h=R(c),L=R(u),m=R(p),w=R(p),k=R(p),g((U=r((y=function(e){function r(){for(var r,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o))||this,t(r,"scrollView",U,a(r)),t(r,"leaderItemPrefab",C,a(r)),t(r,"currentRankLabel",P,a(r)),t(r,"currentUsernameLabel",I,a(r)),t(r,"currentCoinsLabel",S,a(r)),t(r,"apiBaseUrl",B,a(r)),r}n(r,e);var s=r.prototype;return s.start=function(){f.instance?f.instance.getUserId()?this.fetchLeaders():console.error("userId не установлен в SocketManager."):console.error("SocketManager не инициализирован.")},s.fetchLeaders=function(){var e=o(i().mark((function e(){var r,n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.instance.getUserId()){e.next=4;break}return console.error("userId не установлен в SocketManager."),e.abrupt("return");case 4:return e.prev=4,e.next=7,fetch(this.apiBaseUrl+"?userId="+r);case 7:if((n=e.sent).ok){e.next=13;break}if(404!==n.status){e.next=12;break}return console.warn("Топ-лидеров пока нет."),e.abrupt("return");case 12:throw new Error("Network response was not ok");case 13:return e.next=15,n.json();case 15:t=e.sent,console.log("Fetched leaderboard data:",t),this.populateLeadersList(t.top50),t.currentUser&&this.displayCurrentUser(t.currentUser),this.scrollView&&this.scrollView.scrollToTop(0,!1),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),console.error("Ошибка при загрузке списка лидеров:",e.t0);case 25:case"end":return e.stop()}}),e,this,[[4,22]])})));return function(){return e.apply(this,arguments)}}(),s.populateLeadersList=function(e){var r=this,n=this.scrollView.content;console.log("Populating leaderboard list with",e.length,"leaders."),n.removeAllChildren(),e.forEach((function(e,t){console.log("Adding leader "+e.rank+":",e);var a=b(r.leaderItemPrefab);a.parent=n;var o=a.getComponentsInChildren(p);console.log("Found "+o.length+" Label components in LeaderItem.");var i=null,s=null,l=null;o.forEach((function(e){var r=e.node.name;"NumberLabel"===r?i=e:"UsernameLabel"===r?s=e:"CoinsLabel"===r&&(l=e)})),i&&s&&l?(i.string="#"+e.rank,s.string=e.username,l.string=r.formatCoins(e.coins),console.log("Set Number: "+e.rank+", Username: "+e.username+", Coins: "+e.coins)):(console.warn("Не удалось найти один из Label компонентов в LeaderItem"),console.log("Найденные Label узлы:",o.map((function(e){return e.node.name}))))}))},s.displayCurrentUser=function(e){this.currentRankLabel?this.currentRankLabel.string="#"+e.rank:console.warn("currentRankLabel не назначен в LeaderBoardPage."),this.currentUsernameLabel?this.currentUsernameLabel.string=""+e.username:console.warn("currentUsernameLabel не назначен в LeaderBoardPage."),this.currentCoinsLabel?this.currentCoinsLabel.string=""+this.formatCoins(e.coins):console.warn("currentCoinsLabel не назначен в LeaderBoardPage.")},s.formatCoins=function(e){return e>=1e6?Math.round(e/1e6)+"M":Math.round(e).toLocaleString("ru-RU")},r}(d)).prototype,"scrollView",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=r(y.prototype,"leaderItemPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(y.prototype,"currentRankLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(y.prototype,"currentUsernameLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=r(y.prototype,"currentCoinsLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=r(y.prototype,"apiBaseUrl",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://dev.simatap.ru/api/users/leaders"}}),v=y))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./SpineController.ts.ts","./index.mjs_cjs=&original=.js","./index.mjs_cjs=&original=2.js","./BoostController.ts","./FloatingText.ts","./FriendsPage.ts","./IncomeManager.ts","./LeadersPage.ts","./PassiveIncomeModal.ts","./ReferralLinkManager.ts","./SocketManager.ts","./TabBarController.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PassiveIncomeModal.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,i,t,n,l,a,r,c,s;return{setters:[function(e){o=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,r=e.Label,c=e.Node,s=e.Component}],execute:function(){var d,u,h,p,m,f,N,v,b;l._RF.push({},"dacc2yNsjdBz4TFNY64wdg5","PassiveIncomeModal",void 0);var y=a.ccclass,g=a.property;e("PassiveIncomeModal",(d=y("PassiveIncomeModal"),u=g(r),h=g(c),p=g(c),d((N=o((f=function(e){function o(){for(var o,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return o=e.call.apply(e,[this].concat(l))||this,t(o,"incomeLabel",N,n(o)),t(o,"modalNode",v,n(o)),t(o,"closeNode",b,n(o)),o}i(o,e);var l=o.prototype;return l.start=function(){this.modalNode&&(this.modalNode.active=!1),this.closeNode?this.closeNode.on(c.EventType.TOUCH_END,this.onCloseClicked,this):console.warn("closeNode не назначен в PassiveIncomeModal.")},l.show=function(e){this.incomeLabel&&this.modalNode&&(this.incomeLabel.string="+ "+e,this.modalNode.active=!0)},l.hide=function(){this.modalNode&&(this.modalNode.active=!1)},l.onCloseClicked=function(e){this.hide()},o}(s)).prototype,"incomeLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=o(f.prototype,"modalNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=o(f.prototype,"closeNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/ReferralLinkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketManager.ts"],(function(e){var i,n,o,t,r,a,l,c,s,p,f,u,L,d,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,t=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){l=e.cclegacy,c=e._decorator,s=e.Node,p=e.Label,f=e.Vec3,u=e.Component,L=e.Color,d=e.tween},function(e){h=e.SocketManager}],execute:function(){var b,k,y,g,v,N,m,w,C,R,D,T,F;l._RF.push({},"18bc3yUuD1GYI5rJViGJcp5","ReferralLinkManager",void 0);var I=c.ccclass,M=c.property;e("ReferralLinkManager",(b=I("ReferralLinkManager"),k=M(s),y=M(s),g=M(p),v=M(p),b((w=i((m=function(e){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,o(i,"copyLinkNode",w,t(i)),o(i,"inviteFriendNode",C,t(i)),o(i,"referralLinkLabel",R,t(i)),o(i,"copyNotificationLabel",D,t(i)),i.referralLink="",o(i,"animationDuration",T,t(i)),o(i,"moveUpDistance",F,t(i)),i.initialPosition=new f,i}n(i,e);var l=i.prototype;return l.start=function(){this.copyLinkNode||console.error("copyLinkNode не назначен в ReferralLinkManager."),this.inviteFriendNode||console.error("inviteFriendNode не назначен в ReferralLinkManager."),this.referralLinkLabel||console.error("referralLinkLabel не назначен в ReferralLinkManager."),this.copyNotificationLabel||console.error("copyNotificationLabel не назначен в ReferralLinkManager."),this.generateReferralLink(),this.copyLinkNode&&(this.copyLinkNode.on(s.EventType.TOUCH_END,this.onCopyLinkClicked,this),this.copyLinkNode.active=!0),this.inviteFriendNode&&this.inviteFriendNode.on(s.EventType.TOUCH_END,this.onInviteFriendClicked,this),this.copyNotificationLabel&&(this.copyNotificationLabel.node.active=!1,this.initialPosition=this.copyNotificationLabel.node.position.clone())},l.generateReferralLink=function(){var e,i=(null==(e=h.instance)?void 0:e.getUserId())||230230230;console.log("User ID:",i),i?(this.referralLink="https://t.me/misapatStage_bot?startapp=refId"+i,this.referralLinkLabel&&(this.referralLinkLabel.string=this.referralLink),console.log("Реферальная ссылка создана: "+this.referralLink)):console.error("userId не установлен.")},l.onCopyLinkClicked=function(){var e=r(a().mark((function e(){var i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onCopyLinkClicked called"),this.copyNotificationLabel&&(this.copyNotificationLabel.node.active=!0,this.copyNotificationLabel.color=new L(255,255,255,255),this.copyNotificationLabel.node.setPosition(this.initialPosition.clone()),d(this.copyNotificationLabel).to(this.animationDuration,{color:new L(255,255,255,0)}).start(),d(this.copyNotificationLabel.node).by(this.animationDuration,{position:new f(0,this.moveUpDistance,0)}).call((function(){i.copyNotificationLabel.node.active=!1,i.copyNotificationLabel.color=new L(255,255,255,255),i.copyNotificationLabel.node.setPosition(i.initialPosition.clone())})).start()),this.referralLink){e.next=5;break}return console.warn("Реферальная ссылка не создана."),e.abrupt("return");case 5:return e.prev=5,e.next=8,navigator.clipboard.writeText(this.referralLink);case 8:console.log("Реферальная ссылка скопирована в буфер обмена."),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.error("Не удалось скопировать ссылку: ",e.t0);case 14:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}(),l.onInviteFriendClicked=function(){var e;if(console.log("onInviteFriendClicked called"),this.referralLink){var i="https://t.me/share/url?url="+encodeURIComponent(this.referralLink)+"&text="+encodeURIComponent("Тапай и зарабатывай!"),n=null==(e=window.Telegram)?void 0:e.WebApp;n&&n.openTelegramLink?(console.log("Используем tg.openTelegramLink для открытия ссылки"),n.openTelegramLink(i)):(console.warn("Не удалось открыть Telegram для совместного использования."),window.open(i,"_blank"))}else console.warn("Реферальная ссылка не создана.")},i}(u)).prototype,"copyLinkNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(m.prototype,"inviteFriendNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(m.prototype,"referralLinkLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(m.prototype,"copyNotificationLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(m.prototype,"animationDuration",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),F=i(m.prototype,"moveUpDistance",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),N=m))||N));l._RF.pop()}}}));

System.register("chunks:///_virtual/SocketManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IncomeManager.ts","./PassiveIncomeModal.ts"],(function(e){var t,n,s,r,a,o,i,c,u,l,h,d,p,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,s=e.createClass,r=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,l=e.Label,h=e.ProgressBar,d=e.Color,p=e.Component},function(e){f=e.IncomeManager},function(e){g=e.PassiveIncomeModal}],execute:function(){var b,m,v,w,k,y,_,I,x,M,U,L,D,P,T,C,S,E;c._RF.push({},"a0c39VZ6j5NRrT6cxMHqDGB","SocketManager",void 0);var B=u.ccclass,A=u.property;e("SocketManager",(b=B("SocketManager"),m=A(l),v=A(h),w=A(l),k=A(l),y=A(l),_=A(f),I=A(g),b(((E=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,r(t,"coinsLabel",U,a(t)),r(t,"energyProgressBar",L,a(t)),r(t,"energyValueLabel",D,a(t)),r(t,"messagesLabel",P,a(t)),r(t,"boostsLabel",T,a(t)),r(t,"incomeManager",C,a(t)),r(t,"passiveIncomeModal",S,a(t)),t.socket=null,t.userId=null,t.userData=null,t.maxEnergy=2e3,t.currentEnergy=0,t.currentBoosts=0,t.maxBoosts=6,t.currentCoins=0,t}n(t,e);var c=t.prototype;return c.onLoad=function(){if(t._instance&&t._instance!==this)return console.warn("SocketManager уже существует. Удаление дубликата."),void this.node.destroy();t._instance=this},c.start=function(){if(this.coinsLabel&&this.energyProgressBar&&this.energyValueLabel&&this.messagesLabel&&this.boostsLabel){if(!this.incomeManager){var e=this.node.scene.getChildByName("IncomeManagerNode");e?this.incomeManager=e.getComponent(f):console.warn("IncomeManager не найден в сцене.")}this.initializeUser(),this.showUserInfo(!1)}else console.error("Не все необходимые компоненты назначены в SocketManager.")},c.onDestroy=function(){this.socket&&this.socket.disconnect(),t._instance===this&&(t._instance=null)},c.loadTelegramSDK=function(){return new Promise((function(e,t){if(window.Telegram)e();else{var n=document.createElement("script");n.src="https://telegram.org/js/telegram-web-app.js",n.onload=function(){e()},n.onerror=function(){t(new Error("Не удалось загрузить Telegram Web Apps SDK."))},document.head.appendChild(n)}}))},c.initializeUser=function(){var e=o(i().mark((function e(){var t,n,s,r,a,o,c,u,l,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadTelegramSDK();case 3:if(!(s=null==(t=window.Telegram)?void 0:t.WebApp)){e.next=18;break}return console.log("Telegram WebApp API доступен"),console.log(s.initDataUnsafe),e.next=9,new Promise((function(e){s.ready(),e()}));case 9:console.log("tg.initDataUnsafe после готовности:",s.initDataUnsafe),null==s.expand||s.expand(),null==s.disableVerticalSwipes||s.disableVerticalSwipes(),s.isVerticalSwipesEnabled=!1,null==s.setBackgroundColor||s.setBackgroundColor("#272727"),null!=s&&s.web_app_setup_swipe_behavior&&s.web_app_setup_swipe_behavior({allow_vertical_swipe:!1}),null!=(r=s.initDataUnsafe)&&null!=(r=r.user)&&r.id?(a={id:s.initDataUnsafe.user.id,username:s.initDataUnsafe.user.username,first_name:s.initDataUnsafe.user.first_name,last_name:s.initDataUnsafe.user.last_name||"",language_code:s.initDataUnsafe.user.language_code||"",is_premium:s.initDataUnsafe.user.is_premium||!1,photo_url:s.initDataUnsafe.user.photo_url||"",full_name:s.initDataUnsafe.user.first_name+" "+(s.initDataUnsafe.user.last_name||"")},console.log("Данные пользователя Telegram:",a),this.userId=a.id,this.userData=a):(console.warn("Данные пользователя не найдены в tg.initDataUnsafe."),this.useMockData()),e.next=20;break;case 18:console.warn("Telegram WebApp недоступен. Используем моковые данные."),this.useMockData();case 20:return e.next=22,this.createOrUpdateUser(this.userData);case 22:return e.next=24,this.fetchInitialData();case 24:return this.autoConnect(),this.showUserInfo(!0),e.next=28,this.checkPassiveIncome();case 28:if(!s||null==(n=s.initDataUnsafe)||!n.start_param){e.next=52;break}if(o=s.initDataUnsafe.start_param,console.log("start_param:",o),!o.startsWith("refId")){e.next=52;break}if(c=o.replace("refId",""),!(u=this.userId)||!c||u.toString()===c){e.next=52;break}return e.prev=35,e.next=38,fetch("https://dev.simatap.ru/api/referrals?referrer_id="+c+"&referral_id="+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 38:if(!(l=e.sent).ok){e.next=43;break}console.log("Реферал успешно зарегистрирован."),e.next=47;break;case 43:return e.next=45,l.json();case 45:"Такая запись о реферале уже существует"===(h=e.sent).message?console.log("Реферал уже существует."):console.error("Ошибка при регистрации реферала:",h.message);case 47:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(35),console.error("Ошибка при регистрации реферала:",e.t0);case 52:e.next=57;break;case 54:e.prev=54,e.t1=e.catch(0),console.error("Ошибка при инициализации пользователя:",e.t1);case 57:case"end":return e.stop()}}),e,this,[[0,54],[35,49]])})));return function(){return e.apply(this,arguments)}}(),c.useMockData=function(){var e={id:230230230,username:"230 bro's",first_name:"madesta",last_name:"",language_code:"en",is_premium:!1,photo_url:"",full_name:"Test User"};this.userId=e.id,this.userData=e},c.createOrUpdateUser=function(){var e=o(i().mark((function e(t){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URLSearchParams({id:t.id.toString(),username:t.username||"",first_name:t.first_name||"",last_name:t.last_name||""}),e.next=4,fetch("https://dev.simatap.ru/api/users?"+n.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 4:if((s=e.sent).ok){e.next=7;break}throw new Error("Ошибка при отправке POST запроса: "+s.statusText);case 7:console.log("Пользователь успешно создан или обновлен."),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.warn("Ошибка при создании или обновлении пользователя.",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),c.autoConnect=function(){var e=this;try{this.socket=io("https://dev.simatap.ru",{transports:["websocket"],secure:!0,rejectUnauthorized:!1}),this.socket.on("connect",(function(){e.socket.emit("register",{userId:e.userId}),e.showUserInfo(!0)})),this.socket.on("disconnect",(function(){e.showMessage("Отключено от сервера.","danger"),e.showUserInfo(!1)})),this.socket.on("energyUpdated",(function(t){void 0!==t.energy_left?e.updateEnergy(Math.round(t.energy_left)):console.warn("energyUpdated event received, but energy_left is undefined.")})),this.socket.on("boostsUpdated",(function(t){console.log("Received boostsUpdated event:",t),void 0!==t.boosts_left?e.updateBoosts(t.boosts_left):console.warn("boostsUpdated event received, but boosts_left is undefined.")})),this.socket.on("coinsUpdated",(function(t){void 0!==t.coins?e.updateCoins(Math.round(t.coins)):console.warn("coinsUpdated event received, but coins is undefined.")})),this.socket.on("tapError",(function(t){e.showMessage(t.message,"warning")})),this.socket.on("registrationError",(function(t){e.showMessage(t.message,"danger"),e.showUserInfo(!1)})),this.socket.on("connect_error",(function(t){e.showMessage("Ошибка подключения к серверу.","danger")})),this.socket.on("boostActivated",(function(t){console.log("Boost activation response:",t),void 0!==t.newEnergyValue&&e.updateEnergy(Math.round(t.newEnergyValue))})),this.socket.on("boostError",(function(e){console.error("Ошибка активации буста:",e.message)}))}catch(e){this.showMessage("Ошибка подключения к серверу.","danger"),console.error("Socket connection error:",e)}},c.fetchInitialData=function(){var e=o(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dev.simatap.ru/api/users/"+this.userId);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP error! status: "+t.status);case 6:return e.next=8,t.json();case 8:return n=e.sent,console.log("API response:",n),void 0!==n.energy_left?(this.updateEnergy(Math.round(n.energy_left)),console.log("Initial energy fetched: "+Math.round(n.energy_left))):console.warn("Energy data not found in API response."),void 0!==n.boosts_left?(this.updateBoosts(n.boosts_left),console.log("Initial boosts fetched: "+n.boosts_left)):console.warn("Boosts data not found in API response."),e.next=14,this.fetchTotalCoins();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error fetching initial data:",e.t0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),c.fetchTotalCoins=function(){var e=o(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dev.simatap.ru/api/totalCoins/"+this.userId);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP error! status: "+t.status);case 6:return e.next=8,t.json();case 8:void 0!==(n=e.sent).coins?(this.updateCoins(Math.round(n.coins)),console.log("Total coins fetched: "+Math.round(n.coins))):console.warn("Coins data not found in API response."),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.warn("Ошибка при получении количества монет. Используем значение по умолчанию 0.",e.t0),this.updateCoins(0);case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),c.updateCoins=function(e){this.currentCoins=e,this.coinsLabel?this.coinsLabel.string=this.currentCoins.toLocaleString():console.warn("coinsLabel не назначен в SocketManager.")},c.checkPassiveIncome=function(){var e=o(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPassiveIncome();case 2:(t=e.sent)>0&&(this.passiveIncomeModal?this.passiveIncomeModal.show(t):console.warn("PassiveIncomeModal не назначен в SocketManager."),this.currentCoins+=t,this.updateCoins(this.currentCoins));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.fetchPassiveIncome=function(){var e=o(i().mark((function e(){var t,n,s,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dev.simatap.ru/api/passiveIncome?userId="+this.userId);case 3:if((t=e.sent).ok){e.next=9;break}return e.next=7,t.text();case 7:throw n=e.sent,new Error("HTTP error! status: "+t.status+", response: "+n);case 9:return e.next=11,t.json();case 11:if(s=e.sent,console.log("Passive income API response:",s),!("passive_income_earned"in s)){e.next=19;break}return r=Math.round(s.passive_income_earned),console.log("Пассивный доход получен: "+r),e.abrupt("return",r);case 19:if(!("message"in s)){e.next=24;break}return console.log("Сообщение от сервера: "+s.message),e.abrupt("return",0);case 24:return console.warn("Неизвестный формат ответа от сервера:",s),e.abrupt("return",0);case 26:e.next=32;break;case 28:return e.prev=28,e.t0=e.catch(0),console.error("Ошибка при получении пассивного дохода:",e.t0),e.abrupt("return",0);case 32:case"end":return e.stop()}}),e,this,[[0,28]])})));return function(){return e.apply(this,arguments)}}(),c.updateBoosts=function(e){this.currentBoosts=e,this.boostsLabel?this.boostsLabel.string=this.currentBoosts+"/"+this.maxBoosts:console.warn("boostsLabel не назначен в SocketManager.")},c.updateEnergy=function(e){e=Math.round(Math.max(0,Math.min(this.maxEnergy,e))),this.currentEnergy=e;var t=e/this.maxEnergy;this.energyProgressBar.progress=t,this.energyValueLabel.string=e+"/"+this.maxEnergy},c.showUserInfo=function(e){this.coinsLabel&&this.energyProgressBar&&this.energyValueLabel&&this.boostsLabel&&(this.coinsLabel.node.active=e,this.energyProgressBar.node.active=e,this.energyValueLabel.node.active=e,this.boostsLabel.node.active=e)},c.showMessage=function(e,t){if(void 0===t&&(t="info"),this.messagesLabel)switch(this.messagesLabel.string=e,t){case"success":this.messagesLabel.node.color=new d(0,255,0);break;case"danger":this.messagesLabel.node.color=new d(255,0,0);break;case"warning":this.messagesLabel.node.color=new d(255,165,0);break;default:this.messagesLabel.node.color=new d(255,255,255)}},c.getCurrentEnergy=function(){return this.currentEnergy},c.getCurrentBoosts=function(){return this.currentBoosts},c.activateBoost=function(){this.socket&&this.socket.connected&&this.userId?(this.socket.emit("useBoost",{userId:this.userId}),console.log("Буст активирован.")):console.error("Не удалось использовать буст: сокет не подключен или userId не установлен.")},c.onTap=function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.userId){e.next=3;break}return this.showMessage("Пользователь не подключен.","danger"),e.abrupt("return");case 3:if(!(this.currentEnergy<13)){e.next=6;break}return this.showMessage("Не хватает энергии для тапа.","warning"),e.abrupt("return");case 6:this.socket&&this.socket.connected?(this.socket.emit("tap",{userId:this.userId}),this.showMessage("Тап отправлен!","info"),this.triggerHapticFeedback()):this.showMessage("Соединение с сервером отсутствует.","danger");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.getUserId=function(){return this.userId},c.setUserId=function(e){this.userId=e,this.socket&&this.socket.connected&&this.socket.emit("register",{userId:this.userId})},c.triggerHapticFeedback=function(){var e,t=null==(e=window.Telegram)?void 0:e.WebApp;t&&t.HapticFeedback?t.HapticFeedback.impactOccurred("medium"):console.warn("HapticFeedback API недоступен.")},s(t,null,[{key:"instance",get:function(){return t._instance||console.error("SocketManager не инициализирован. Убедитесь, что он добавлен на ноду в сцене."),t._instance}}]),t}(p))._instance=null,U=t((M=E).prototype,"coinsLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(M.prototype,"energyProgressBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(M.prototype,"energyValueLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(M.prototype,"messagesLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(M.prototype,"boostsLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(M.prototype,"incomeManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(M.prototype,"passiveIncomeModal",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=M))||x));c._RF.pop()}}}));

System.register("chunks:///_virtual/SpineController.ts.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketManager.ts"],(function(e){var n,t,i,o,r,a,s,l,c,p,f,u,h,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.sp,l=e.Prefab,c=e.UITransform,p=e.Node,f=e.Vec3,u=e.instantiate,h=e.Component},function(e){g=e.SocketManager}],execute:function(){var C,m,d,S,b,v,k,w,y;r._RF.push({},"7af28zZEkNKYY1uSBPGocx/","SpineController.ts",void 0);var T=a.ccclass,P=a.property;e("SpineController",(C=T("SpineController"),m=P(s.Skeleton),d=P(g),S=P(l),C((k=n((v=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"spine",k,o(n)),i(n,"socketManager",w,o(n)),i(n,"floatingTextPrefab",y,o(n)),n}t(n,e);var r=n.prototype;return r.onLoad=function(){var e=this.getComponent(c);e||(e=this.addComponent(c)),e.setContentSize(4e3,3e3),e.setAnchorPoint(.553265,.004952),this.node.on(p.EventType.TOUCH_END,this.onSpineClicked,this),this.spine?(this.spine.setAnimation(0,"Основная",!0),this.spine.setCompleteListener(this.onAnimationComplete.bind(this))):console.warn("Spine компонент не установлен в SpineController.")},r.onSpineClicked=function(e){if(this.socketManager)if(this.socketManager.getCurrentEnergy()>=13){this.spine&&(this.spine.setAnimation(1,"Нажатие",!1),this.spine.addAnimation(1,"Основная",!0,0)),this.socketManager.onTap();var n=e.getUILocation();this.spawnFloatingText(n)}else this.socketManager.showMessage("Не хватает энергии для тапа.","warning");else console.warn("SocketManager не установлен в SpineController.")},r.onAnimationComplete=function(e){e&&1===e.trackIndex&&this.spine.setAnimation(1,"Основная",!0)},r.spawnFloatingText=function(e){if(this.floatingTextPrefab){var n=this.node.scene.getChildByName("Canvas");if(n){var t=n.getComponent(c);if(t){var i=t.contentSize,o=e.x-i.width/2,r=e.y-i.height/2,a=new f(o,r,100),s=u(this.floatingTextPrefab);s.setParent(n),s.setPosition(a)}else console.warn("UITransform не найден на Canvas.")}else console.warn("Canvas не найден.")}else console.warn("floatingTextPrefab не установлен в SpineController.")},n}(h)).prototype,"spine",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(v.prototype,"socketManager",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(v.prototype,"floatingTextPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/TabBarController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,a,r,s,l,u,c,b,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Node,l=e.Label,u=e.UIOpacity,c=e.tween,b=e.Vec3,h=e.Color,p=e.Component}],execute:function(){var g,d,f,m,v,P,T,w,y,k,x,H,z,L,F,E,C,S,B,I,N,U,R,_,A,D,O,W,G,Y,M,j,K,V,Z,q,J,Q,X,$,ee,te,ne;a._RF.push({},"40497KNIRZM96W3FB/cr0rR","TabBarController",void 0);var ie=r.ccclass,oe=r.property;e("TabBarController",(g=ie("TabBarController"),d=oe(s),f=oe(s),m=oe(s),v=oe(s),P=oe(s),T=oe(s),w=oe(s),y=oe(s),k=oe(s),x=oe(s),H=oe(l),z=oe(l),L=oe(l),F=oe(l),E=oe(l),C=oe(s),S=oe(s),B=oe(s),I=oe(s),N=oe(s),g((_=t((R=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"mainPage",_,o(t)),i(t,"friendsPage",A,o(t)),i(t,"storePage",D,o(t)),i(t,"leadersPage",O,o(t)),i(t,"tasksPage",W,o(t)),i(t,"iconHome",G,o(t)),i(t,"iconFriends",Y,o(t)),i(t,"iconStore",M,o(t)),i(t,"iconLeaders",j,o(t)),i(t,"iconTasks",K,o(t)),i(t,"textHome",V,o(t)),i(t,"textFriends",Z,o(t)),i(t,"textStore",q,o(t)),i(t,"textLeaders",J,o(t)),i(t,"textTasks",Q,o(t)),i(t,"buttonHome",X,o(t)),i(t,"buttonFriends",$,o(t)),i(t,"buttonLeaders",ee,o(t)),i(t,"buttonTasks",te,o(t)),i(t,"activeButton",ne,o(t)),t.currentTab="home",t}n(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;this.checkProperties(),this.showPage(this.currentTab,!1),this.iconHome.on(s.EventType.TOUCH_END,(function(){e.showPage("home",!0)})),this.iconFriends.on(s.EventType.TOUCH_END,(function(){e.showPage("friends",!0)})),this.iconStore.on(s.EventType.TOUCH_END,(function(){e.showPage("store",!0)})),this.iconLeaders.on(s.EventType.TOUCH_END,(function(){e.showPage("leaders",!0)})),this.iconTasks.on(s.EventType.TOUCH_END,(function(){e.showPage("tasks",!0)}))},a.checkProperties=function(){[{name:"mainPage",value:this.mainPage},{name:"friendsPage",value:this.friendsPage},{name:"storePage",value:this.storePage},{name:"leadersPage",value:this.leadersPage},{name:"tasksPage",value:this.tasksPage},{name:"iconHome",value:this.iconHome},{name:"iconFriends",value:this.iconFriends},{name:"iconStore",value:this.iconStore},{name:"iconLeaders",value:this.iconLeaders},{name:"iconTasks",value:this.iconTasks},{name:"textHome",value:this.textHome},{name:"textFriends",value:this.textFriends},{name:"textStore",value:this.textStore},{name:"textLeaders",value:this.textLeaders},{name:"textTasks",value:this.textTasks},{name:"buttonHome",value:this.buttonHome},{name:"buttonFriends",value:this.buttonFriends},{name:"buttonLeaders",value:this.buttonLeaders},{name:"buttonTasks",value:this.buttonTasks},{name:"activeButton",value:this.activeButton}].forEach((function(e){e.value||console.warn('Property "'+e.name+'" is not assigned in the inspector.')}))},a.showPage=function(e,t){void 0===t&&(t=!0),e!==this.currentTab&&(this.hidePage(this.currentTab,t),this.showNewPage(e,t),this.updateTabUI(e),this.currentTab=e)},a.hidePage=function(e,t){var n=this.getPageNode(e);if(n){var i=n.getComponent(u);i||(console.warn('UIOpacity component not found on "'+e+'" page. Adding one.'),i=n.addComponent(u)),t?(c(n).to(.3,{scale:new b(.95,.95,1)}).start(),c(i).to(.3,{opacity:0}).call((function(){n.active=!1,n.setScale(1,1,1),i.opacity=255,console.log('Page "'+e+'" скрыта.')})).start()):(n.active=!1,i.opacity=255,console.log('Page "'+e+'" скрыта без анимации.'))}else console.error('Page node for "'+e+'" not found.')},a.showNewPage=function(e,t){var n=this.getPageNode(e);if(n){n.active=!0;var i=n.getComponent(u);i||(console.warn('UIOpacity component not found on "'+e+'" page. Adding one.'),i=n.addComponent(u)),t?(i.opacity=0,n.setScale(.95,.95,1),c(i).to(.3,{opacity:255}).start(),c(n).to(.3,{scale:new b(1.05,1.05,1)}).to(.3,{scale:new b(1,1,1)}).call((function(){console.log('Page "'+e+'" показана.')})).start()):(i.opacity=255,n.setScale(1,1,1),console.log('Page "'+e+'" показана без анимации.'))}else console.error('Page node for "'+e+'" not found.')},a.getPageNode=function(e){switch(e){case"home":return this.mainPage;case"friends":return this.friendsPage;case"store":return this.storePage;case"leaders":return this.leadersPage;case"tasks":return this.tasksPage;default:return console.warn("Unknown page: "+e),null}},a.updateTabUI=function(e){switch(this.textHome.color=h.GRAY,this.textFriends.color=h.GRAY,this.textStore.color=h.GRAY,this.textLeaders.color=h.GRAY,this.textTasks.color=h.GRAY,this.activeButton.active=!1,this.buttonHome.active=!1,this.buttonFriends.active=!1,this.buttonLeaders.active=!1,this.buttonTasks.active=!1,e){case"home":this.textHome.color=h.WHITE,this.buttonHome.active=!0;break;case"friends":this.textFriends.color=h.WHITE,this.buttonFriends.active=!0;break;case"store":this.textStore.color=h.WHITE,this.activeButton.active=!0;break;case"leaders":this.textLeaders.color=h.WHITE,this.buttonLeaders.active=!0;break;case"tasks":this.textTasks.color=h.WHITE,this.buttonTasks.active=!0}},t}(p)).prototype,"mainPage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(R.prototype,"friendsPage",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"storePage",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(R.prototype,"leadersPage",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(R.prototype,"tasksPage",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(R.prototype,"iconHome",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(R.prototype,"iconFriends",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(R.prototype,"iconStore",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(R.prototype,"iconLeaders",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(R.prototype,"iconTasks",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(R.prototype,"textHome",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(R.prototype,"textFriends",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(R.prototype,"textStore",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(R.prototype,"textLeaders",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(R.prototype,"textTasks",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(R.prototype,"buttonHome",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(R.prototype,"buttonFriends",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(R.prototype,"buttonLeaders",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(R.prototype,"buttonTasks",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(R.prototype,"activeButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=R))||U));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});